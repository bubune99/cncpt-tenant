{"version":3,"sources":["/mnt/c/Users/bubun/CascadeProjects/cncpt-tenant/packages/cms/dist/chunk-H5AODFHA.js","../src/app/admin/AdminShell.tsx","../src/contexts/WizardContext.tsx","../src/components/admin-chat/index.tsx","../src/components/branding/Logo.tsx","../src/components/admin/BrandingSettings.tsx","../src/components/admin/MediaPicker.tsx","../src/components/admin/DashboardMetrics.tsx","../src/components/admin/QuickActions.tsx","../src/components/admin/EnvManager.tsx","../src/components/ui/progress.tsx","../src/components/ui/alert.tsx","../src/components/ui/accordion.tsx","../src/components/admin/EmailProviderSettings.tsx","../src/components/ui/switch.tsx","../src/components/ui/select.tsx","../src/components/admin/media/MediaManager.tsx","../src/hooks/use-media.ts","../src/components/admin/media/MediaCard.tsx","../src/components/ui/checkbox.tsx","../src/components/ui/context-menu.tsx","../src/components/admin/media/MediaContextMenu.tsx","../src/components/ui/skeleton.tsx","../src/components/admin/media/MediaGrid.tsx","../src/components/admin/media/MediaRow.tsx","../src/components/ui/table.tsx","../src/components/admin/media/MediaList.tsx","../src/components/admin/media/MediaToolbar.tsx","../src/components/admin/media/MediaFolderTree.tsx","../src/components/ui/dropdown-menu.tsx","../src/components/admin/media/MediaBulkActions.tsx","../src/components/admin/media/MediaPreviewSheet.tsx","../src/components/ui/sheet.tsx","../src/components/admin/media/MediaUploader.tsx","../src/components/admin/media/FolderDialog.tsx","../src/components/ui/alert-dialog.tsx"],"names":["_a","_b","_c","ChatPanel","jsx","useState","useEffect","jsxs","Link","Users","Package","ShoppingCart","Mail","Settings","FileText","TrendingUp","Truck","Check","Loader2","Search","Upload","X","Eye","EyeOff","useCallback","AlertCircle","forwardRef","Image","Download","Film","Music","ImageIcon","File","ChevronRight","ChevronDown","FolderIcon","FolderInput","Tags","Trash","Tag","cva","ExternalLink","Copy","Save"],"mappings":"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","file":"/mnt/c/Users/bubun/CascadeProjects/cncpt-tenant/packages/cms/dist/chunk-H5AODFHA.js","sourcesContent":[null,"'use client';\n\nimport { useState } from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useAuth } from '../../hooks/use-auth';\nimport { WizardProvider } from '../../contexts/WizardContext';\nimport { CMSConfigProvider, type CMSConfig } from '../../contexts/CMSConfigContext';\nimport { AdminChat } from '../../components/admin-chat';\nimport {\n  LayoutDashboard,\n  Users,\n  LogOut,\n  Menu,\n  X,\n  ArrowLeft,\n  Package,\n  ShoppingCart,\n  Truck,\n  FileText,\n  Mail,\n  BarChart3,\n  Puzzle,\n  Settings,\n  ChevronDown,\n  ChevronRight,\n  Search,\n  Bell,\n  HelpCircle,\n  Layers,\n  GitBranch,\n  Image,\n  Key,\n  Workflow,\n  ClipboardList,\n} from 'lucide-react';\nimport { Input } from '../../components/ui/input';\nimport { Logo } from '../../components/branding/Logo';\n\ninterface NavItem {\n  name: string;\n  href: string;\n  icon: React.ComponentType<{ className?: string }>;\n}\n\ninterface NavGroup {\n  name: string;\n  items: NavItem[];\n}\n\n// Re-export CMSConfig as AdminShellConfig for backwards compatibility\nexport type AdminShellConfig = CMSConfig;\n\nexport function AdminShell({\n  children,\n  config = {},\n}: {\n  children: React.ReactNode;\n  config?: CMSConfig;\n}) {\n  const { user, signOut } = useAuth();\n  const pathname = usePathname();\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n  const [expandedGroups, setExpandedGroups] = useState<string[]>(['Main', 'E-Commerce', 'Content']);\n  const [searchQuery, setSearchQuery] = useState('');\n\n  // Extract config options with defaults\n  const {\n    basePath = '',\n    hiddenGroups = [],\n    hiddenItems = [],\n    siteUrl = '/',\n    siteName,\n    userRole = 'Super Admin',\n    showChat = true,\n  } = config;\n\n  // Helper to build paths with basePath prefix\n  const buildPath = (path: string): string => {\n    if (!basePath) return path;\n    // Replace /admin with basePath/admin\n    return path.replace('/admin', `${basePath}/admin`);\n  };\n\n  const allNavigationGroups: NavGroup[] = [\n    {\n      name: 'Main',\n      items: [\n        { name: 'Dashboard', href: '/admin', icon: LayoutDashboard },\n        { name: 'Analytics', href: '/admin/analytics', icon: BarChart3 },\n      ],\n    },\n    {\n      name: 'E-Commerce',\n      items: [\n        { name: 'Products', href: '/admin/products', icon: Package },\n        { name: 'Orders', href: '/admin/orders', icon: ShoppingCart },\n        { name: 'Order Workflows', href: '/admin/order-workflows', icon: Workflow },\n        { name: 'Shipping', href: '/admin/shipping', icon: Truck },\n        { name: 'Customers', href: '/admin/customers', icon: Users },\n      ],\n    },\n    {\n      name: 'Content',\n      items: [\n        { name: 'Pages', href: '/admin/pages', icon: Layers },\n        { name: 'Blog', href: '/admin/blog', icon: FileText },\n        { name: 'Forms', href: '/admin/forms', icon: ClipboardList },\n        { name: 'Media', href: '/admin/media', icon: Image },\n        { name: 'Email Marketing', href: '/admin/email-marketing', icon: Mail },\n      ],\n    },\n    {\n      name: 'System',\n      items: [\n        { name: 'Users', href: '/admin/users', icon: Users },\n        { name: 'Roles & Permissions', href: '/admin/roles', icon: Key },\n        { name: 'Plugins', href: '/admin/plugins', icon: Puzzle },\n        { name: 'Workflows', href: '/admin/workflows', icon: GitBranch },\n        { name: 'Settings', href: '/admin/settings', icon: Settings },\n      ],\n    },\n  ];\n\n  // Filter navigation based on config\n  const navigationGroups = allNavigationGroups\n    .filter(group => !hiddenGroups.includes(group.name))\n    .map(group => ({\n      ...group,\n      items: group.items.filter(item => !hiddenItems.includes(item.name)),\n    }))\n    .filter(group => group.items.length > 0);\n\n  const toggleGroup = (groupName: string) => {\n    setExpandedGroups(prev =>\n      prev.includes(groupName)\n        ? prev.filter(g => g !== groupName)\n        : [...prev, groupName]\n    );\n  };\n\n  const isActiveLink = (href: string) => {\n    const fullHref = buildPath(href);\n    if (href === '/admin') {\n      return pathname === fullHref;\n    }\n    return pathname?.startsWith(fullHref);\n  };\n\n  // Show admin layout for all authenticated users\n  // Role-based access control is handled at the page/route level\n  if (!user) {\n    return <>{children}</>;\n  }\n\n  return (\n    <CMSConfigProvider config={config}>\n      <WizardProvider>\n        <div className=\"min-h-screen bg-background\">\n        {/* Mobile sidebar toggle */}\n        <div className=\"lg:hidden fixed top-4 left-4 z-50\">\n          <button\n            onClick={() => setIsSidebarOpen(!isSidebarOpen)}\n            className=\"p-2 rounded-md bg-card border border-border\"\n          >\n            {isSidebarOpen ? <X className=\"h-5 w-5\" /> : <Menu className=\"h-5 w-5\" />}\n          </button>\n        </div>\n\n        {/* Sidebar */}\n        <div className={`fixed inset-y-0 left-0 z-40 w-56 bg-card border-r border-border transform transition-transform duration-200 ease-in-out ${\n          isSidebarOpen ? 'translate-x-0' : '-translate-x-full'\n        } lg:translate-x-0`}>\n          <div className=\"flex flex-col h-full\">\n            {/* Logo */}\n            <div className=\"px-4 py-4 border-b border-border\">\n              <Logo href={buildPath('/admin')} size=\"sm\" />\n              <p className=\"text-xs text-muted-foreground mt-1 pl-8\">\n                {siteName ? `${siteName} Admin` : 'Admin Panel'}\n              </p>\n            </div>\n\n            {/* Admin info */}\n            <div className=\"px-4 py-3 border-b border-border\">\n              <p className=\"text-sm font-medium\">{user.displayName || 'Admin'}</p>\n              <p className=\"text-xs text-muted-foreground\">{user.primaryEmail}</p>\n              <span className=\"inline-flex items-center px-2 py-0.5 mt-1 text-xs font-medium rounded-full bg-primary/10 text-primary\">\n                {userRole}\n              </span>\n            </div>\n\n          {/* Navigation */}\n          <nav className=\"flex-1 px-2 py-4 overflow-y-auto\">\n            <div className=\"space-y-4\">\n              {navigationGroups.map((group) => (\n                <div key={group.name}>\n                  <button\n                    onClick={() => toggleGroup(group.name)}\n                    className=\"flex items-center justify-between w-full px-3 py-1.5 text-xs font-semibold text-muted-foreground uppercase tracking-wider hover:text-foreground transition-colors\"\n                  >\n                    {group.name}\n                    {expandedGroups.includes(group.name) ? (\n                      <ChevronDown className=\"h-3 w-3\" />\n                    ) : (\n                      <ChevronRight className=\"h-3 w-3\" />\n                    )}\n                  </button>\n                  {expandedGroups.includes(group.name) && (\n                    <ul className=\"mt-1 space-y-0.5\">\n                      {group.items.map((item) => {\n                        const Icon = item.icon;\n                        const isActive = isActiveLink(item.href);\n                        return (\n                            <li key={item.name}>\n                              <Link\n                                href={buildPath(item.href)}\n                                className={`flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors ${\n                                  isActive\n                                    ? 'bg-primary text-primary-foreground'\n                                    : 'hover:bg-accent hover:text-accent-foreground'\n                                }`}\n                              >\n                                <Icon className=\"h-4 w-4\" />\n                                {item.name}\n                              </Link>\n                            </li>\n                        );\n                      })}\n                    </ul>\n                  )}\n                </div>\n              ))}\n            </div>\n          </nav>\n\n            {/* Footer */}\n            <div className=\"p-4 border-t border-border\">\n              <Link\n                href={siteUrl}\n                className=\"flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground transition-colors mb-2\"\n              >\n                <ArrowLeft className=\"h-4 w-4\" />\n                View Site\n              </Link>\n              <button\n                onClick={() => signOut()}\n                className=\"flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground transition-colors w-full\"\n              >\n                <LogOut className=\"h-4 w-4\" />\n                Sign Out\n              </button>\n            </div>\n          </div>\n        </div>\n\n      {/* Main content */}\n      <div className=\"lg:pl-56\">\n        {/* Content Header */}\n        <header className=\"sticky top-0 z-30 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b border-border\">\n          <div className=\"flex items-center justify-between h-16 px-6 lg:px-8\">\n            {/* Search Bar */}\n            <div className=\"flex-1 max-w-xl\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  type=\"search\"\n                  placeholder=\"Search products, orders, customers...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10 w-full\"\n                />\n              </div>\n            </div>\n\n            {/* Header Actions - Placeholder for future features */}\n            <div className=\"flex items-center gap-2 ml-4\">\n              {/* Future: Notifications */}\n              <button\n                className=\"p-2 rounded-md hover:bg-accent transition-colors\"\n                title=\"Notifications (coming soon)\"\n              >\n                <Bell className=\"h-5 w-5 text-muted-foreground\" />\n              </button>\n\n              {/* Future: Help */}\n              <button\n                className=\"p-2 rounded-md hover:bg-accent transition-colors\"\n                title=\"Help (coming soon)\"\n              >\n                <HelpCircle className=\"h-5 w-5 text-muted-foreground\" />\n              </button>\n            </div>\n          </div>\n        </header>\n\n        {/* Page Content */}\n        <main className=\"min-h-[calc(100vh-4rem)]\">\n          {children}\n        </main>\n      </div>\n\n        {/* AI Chat Panel - persists across admin routes */}\n        {showChat && <AdminChat />}\n      </div>\n      </WizardProvider>\n    </CMSConfigProvider>\n  );\n}\n","'use client';\n\nimport React, { createContext, useContext, useState, useEffect, ReactNode, useRef } from 'react';\nimport Shepherd from 'shepherd.js';\nimport 'shepherd.js/dist/css/shepherd.css';\n\n// Define types for our context\ntype TourId = string;\n\ninterface WizardContextType {\n  startTour: (tourId: TourId) => void;\n  endTour: () => void;\n  isTourActive: boolean;\n  currentTourId: TourId | null;\n  markTourCompleted: (tourId: TourId) => void;\n  isTourCompleted: (tourId: TourId) => boolean;\n  resetTourHistory: () => void;\n}\n\ninterface WizardProviderProps {\n  children: ReactNode;\n}\n\n// Create the context\nconst WizardContext = createContext<WizardContextType | undefined>(undefined);\n\n// Define tours with their steps\ninterface TourStep {\n  id: string;\n  title?: string;\n  text: string;\n  attachTo?: {\n    element: string;\n    on: string;\n  };\n  buttons?: Array<{\n    text: string;\n    action: string | (() => void);\n    classes?: string;\n  }>;\n  classes?: string;\n  highlightClass?: string;\n  scrollTo?: boolean;\n  canClickTarget?: boolean;\n  showCancelLink?: boolean;\n}\n\ninterface TourConfig {\n  steps: TourStep[];\n  options?: {\n    useModalOverlay?: boolean;\n    exitOnEsc?: boolean;\n    keyboardNavigation?: boolean;\n    defaultStepOptions?: {\n      scrollTo?: boolean;\n      cancelIcon?: {\n        enabled?: boolean;\n      };\n    };\n  };\n}\n\n// Apple-inspired theme styles\nconst tourStyles = `\n  .shepherd-element {\n    background: white !important;\n    border-radius: 12px !important;\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15) !important;\n    padding: 20px !important;\n    max-width: 360px !important;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif !important;\n  }\n  \n  .shepherd-header {\n    padding-bottom: 12px !important;\n  }\n  \n  .shepherd-title {\n    font-size: 18px !important;\n    font-weight: 600 !important;\n    color: #1d1d1f !important;\n    margin: 0 !important;\n  }\n  \n  .shepherd-text {\n    font-size: 15px !important;\n    line-height: 1.5 !important;\n    color: #424245 !important;\n    margin: 8px 0 16px 0 !important;\n  }\n  \n  .shepherd-footer {\n    display: flex !important;\n    justify-content: flex-end !important;\n    gap: 8px !important;\n    padding-top: 12px !important;\n  }\n  \n  .shepherd-button {\n    background: #007aff !important;\n    color: white !important;\n    border: none !important;\n    border-radius: 8px !important;\n    padding: 8px 16px !important;\n    font-size: 15px !important;\n    font-weight: 500 !important;\n    cursor: pointer !important;\n    transition: background 0.2s !important;\n  }\n  \n  .shepherd-button:hover {\n    background: #0051d5 !important;\n  }\n  \n  .shepherd-button-secondary {\n    background: #f5f5f7 !important;\n    color: #1d1d1f !important;\n  }\n  \n  .shepherd-button-secondary:hover {\n    background: #e8e8ed !important;\n  }\n  \n  .shepherd-modal-overlay-container {\n    background: rgba(0, 0, 0, 0.5) !important;\n  }\n`;\n\n// Define available tours\nconst tours: Record<TourId, TourConfig> = {\n  'admin-dashboard': {\n    steps: [\n      {\n        id: 'welcome',\n        title: 'Welcome to Your Admin Dashboard',\n        text: 'This powerful dashboard gives you complete control over your platform. Let\\'s explore the key features.',\n        buttons: [\n          {\n            text: 'Get Started',\n            action: 'next'\n          }\n        ]\n      },\n      {\n        id: 'sidebar',\n        title: 'Navigation Sidebar',\n        text: 'Access all admin features from here. Each section is designed for specific management tasks.',\n        attachTo: {\n          element: '[data-tour=\"sidebar\"]',\n          on: 'right'\n        },\n        buttons: [\n          {\n            text: 'Next',\n            action: 'next'\n          }\n        ]\n      },\n      {\n        id: 'stats',\n        title: 'Platform Statistics',\n        text: 'Monitor key metrics at a glance. Click any stat card for detailed analytics.',\n        attachTo: {\n          element: '[data-tour=\"stats\"]',\n          on: 'bottom'\n        },\n        buttons: [\n          {\n            text: 'Next',\n            action: 'next'\n          }\n        ]\n      },\n      {\n        id: 'users',\n        title: 'User Management',\n        text: 'View, search, and manage all platform users from this central location.',\n        attachTo: {\n          element: '[data-tour=\"users-section\"]',\n          on: 'top'\n        },\n        buttons: [\n          {\n            text: 'Finish',\n            action: 'complete'\n          }\n        ]\n      }\n    ],\n    options: {\n      useModalOverlay: true,\n      exitOnEsc: true,\n      keyboardNavigation: true,\n      defaultStepOptions: {\n        scrollTo: true,\n        cancelIcon: {\n          enabled: true\n        }\n      }\n    }\n  },\n  \n  'business-owner-dashboard': {\n    steps: [\n      {\n        id: 'welcome',\n        title: 'Welcome to Your Business Dashboard',\n        text: 'Manage your digital assets, track sales, and connect with designers all in one place.',\n        buttons: [\n          {\n            text: 'Start Tour',\n            action: 'next'\n          }\n        ]\n      },\n      {\n        id: 'products',\n        title: 'Your Products',\n        text: 'Create and manage your digital products. Each product can have multiple design templates.',\n        attachTo: {\n          element: '[data-tour=\"products\"]',\n          on: 'bottom'\n        },\n        buttons: [\n          {\n            text: 'Next',\n            action: 'next'\n          }\n        ]\n      },\n      {\n        id: 'designers',\n        title: 'Designer Network',\n        text: 'Browse and connect with talented designers. View portfolios and send collaboration requests.',\n        attachTo: {\n          element: '[data-tour=\"designers\"]',\n          on: 'top'\n        },\n        buttons: [\n          {\n            text: 'Next',\n            action: 'next'\n          }\n        ]\n      },\n      {\n        id: 'api-keys',\n        title: 'API Integration',\n        text: 'Generate API keys to integrate your products with external platforms and services.',\n        attachTo: {\n          element: '[data-tour=\"api-keys\"]',\n          on: 'left'\n        },\n        buttons: [\n          {\n            text: 'Complete',\n            action: 'complete'\n          }\n        ]\n      }\n    ]\n  },\n  \n  'designer-dashboard': {\n    steps: [\n      {\n        id: 'welcome',\n        title: 'Designer Studio',\n        text: 'Your creative workspace for managing projects, templates, and client collaborations.',\n        buttons: [\n          {\n            text: 'Begin',\n            action: 'next'\n          }\n        ]\n      },\n      {\n        id: 'portfolio',\n        title: 'Portfolio Showcase',\n        text: 'Showcase your best work. Keep your portfolio updated to attract more clients.',\n        attachTo: {\n          element: '[data-tour=\"portfolio\"]',\n          on: 'bottom'\n        },\n        buttons: [\n          {\n            text: 'Next',\n            action: 'next'\n          }\n        ]\n      },\n      {\n        id: 'templates',\n        title: 'Design Templates',\n        text: 'Create reusable templates for different product types. Set your pricing and licensing terms.',\n        attachTo: {\n          element: '[data-tour=\"templates\"]',\n          on: 'top'\n        },\n        buttons: [\n          {\n            text: 'Next',\n            action: 'next'\n          }\n        ]\n      },\n      {\n        id: 'earnings',\n        title: 'Earnings Dashboard',\n        text: 'Track your earnings, view payment history, and manage withdrawal settings.',\n        attachTo: {\n          element: '[data-tour=\"earnings\"]',\n          on: 'left'\n        },\n        buttons: [\n          {\n            text: 'Finish Tour',\n            action: 'complete'\n          }\n        ]\n      }\n    ]\n  }\n};\n\n// Provider component\nexport function WizardProvider({ children }: WizardProviderProps) {\n  const [isTourActive, setIsTourActive] = useState(false);\n  const [currentTourId, setCurrentTourId] = useState<TourId | null>(null);\n  const [completedTours, setCompletedTours] = useState<Set<TourId>>(new Set());\n  const tourRef = useRef<InstanceType<typeof Shepherd.Tour> | null>(null);\n\n  // Load completed tours from localStorage\n  useEffect(() => {\n    const stored = localStorage.getItem('completedTours');\n    if (stored) {\n      setCompletedTours(new Set(JSON.parse(stored)));\n    }\n  }, []);\n\n  // Save completed tours to localStorage\n  useEffect(() => {\n    if (completedTours.size > 0) {\n      localStorage.setItem('completedTours', JSON.stringify(Array.from(completedTours)));\n    }\n  }, [completedTours]);\n\n  // Add styles to document\n  useEffect(() => {\n    const styleElement = document.createElement('style');\n    styleElement.textContent = tourStyles;\n    document.head.appendChild(styleElement);\n    \n    return () => {\n      document.head.removeChild(styleElement);\n    };\n  }, []);\n\n  const startTour = (tourId: TourId) => {\n    const tourConfig = tours[tourId];\n    if (!tourConfig) {\n      console.warn(`Tour \"${tourId}\" not found`);\n      return;\n    }\n\n    // Clean up existing tour\n    if (tourRef.current) {\n      tourRef.current.complete();\n    }\n\n    // Create new tour instance\n    const tour = new Shepherd.Tour({\n      useModalOverlay: tourConfig.options?.useModalOverlay ?? true,\n      defaultStepOptions: {\n        cancelIcon: {\n          enabled: tourConfig.options?.defaultStepOptions?.cancelIcon?.enabled ?? true\n        },\n        scrollTo: tourConfig.options?.defaultStepOptions?.scrollTo ?? true\n      }\n    });\n\n    // Add steps\n    tourConfig.steps.forEach(step => {\n      const shepherdStep: any = {\n        id: step.id,\n        title: step.title,\n        text: step.text,\n        scrollTo: step.scrollTo ?? true,\n        classes: step.classes,\n        highlightClass: step.highlightClass,\n        canClickTarget: step.canClickTarget ?? false,\n        buttons: step.buttons?.map(button => {\n          if (typeof button.action === 'string') {\n            if (button.action === 'next') {\n              return {\n                text: button.text,\n                action: tour.next,\n                classes: button.classes\n              };\n            } else if (button.action === 'back') {\n              return {\n                text: button.text,\n                action: tour.back,\n                classes: button.classes\n              };\n            } else if (button.action === 'complete') {\n              return {\n                text: button.text,\n                action: tour.complete,\n                classes: button.classes\n              };\n            }\n          }\n          return {\n            text: button.text,\n            action: button.action,\n            classes: button.classes\n          };\n        })\n      };\n\n      if (step.attachTo) {\n        shepherdStep.attachTo = step.attachTo;\n      }\n\n      tour.addStep(shepherdStep);\n    });\n\n    // Set up event handlers\n    tour.on('complete', () => {\n      if (currentTourId) {\n        markTourCompleted(currentTourId);\n      }\n      endTour();\n    });\n\n    tour.on('cancel', () => {\n      endTour();\n    });\n\n    // Store tour reference\n    tourRef.current = tour;\n    setCurrentTourId(tourId);\n    setIsTourActive(true);\n    \n    // Start the tour\n    tour.start();\n  };\n\n  const endTour = () => {\n    if (tourRef.current) {\n      tourRef.current.complete();\n      tourRef.current = null;\n    }\n    setIsTourActive(false);\n    setCurrentTourId(null);\n  };\n\n  const markTourCompleted = (tourId: TourId) => {\n    setCompletedTours(prev => new Set([...prev, tourId]));\n  };\n\n  const isTourCompleted = (tourId: TourId) => {\n    return completedTours.has(tourId);\n  };\n\n  const resetTourHistory = () => {\n    setCompletedTours(new Set());\n    localStorage.removeItem('completedTours');\n  };\n\n  return (\n    <WizardContext.Provider\n      value={{\n        startTour,\n        endTour,\n        isTourActive,\n        currentTourId,\n        markTourCompleted,\n        isTourCompleted,\n        resetTourHistory,\n      }}\n    >\n      {children}\n    </WizardContext.Provider>\n  );\n}\n\n// Custom hook to use the wizard context\nexport function useWizard() {\n  const context = useContext(WizardContext);\n  if (context === undefined) {\n    throw new Error('useWizard must be used within a WizardProvider');\n  }\n  return context;\n}","'use client';\n\n/**\n * Admin Chat Component\n *\n * Wrapper component that handles hydration and provides the chat panel\n * in the admin layout.\n */\n\nimport dynamic from 'next/dynamic';\n\n// Dynamic import to avoid hydration issues with Zustand persist\nconst ChatPanel = dynamic(\n  () => import('./chat-panel').then((mod) => ({ default: mod.ChatPanel })),\n  { ssr: false }\n);\n\nexport function AdminChat() {\n  return <ChatPanel />;\n}\n\nexport { ChatPanel } from './chat-panel';\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useTheme } from \"next-themes\";\nimport Link from \"next/link\";\nimport Image from \"next/image\";\n\ninterface LogoProps {\n  href?: string;\n  className?: string;\n  size?: \"sm\" | \"md\" | \"lg\";\n  showText?: boolean;\n}\n\ninterface BrandingData {\n  siteName: string;\n  siteTagline?: string;\n  logoUrl?: string;\n  logoDarkUrl?: string;\n  logoAlt?: string;\n}\n\nconst sizeClasses = {\n  sm: \"h-6\",\n  md: \"h-8\",\n  lg: \"h-12\",\n};\n\nconst textSizeClasses = {\n  sm: \"text-lg\",\n  md: \"text-xl\",\n  lg: \"text-2xl\",\n};\n\nexport function Logo({\n  href = \"/\",\n  className = \"\",\n  size = \"md\",\n  showText = true,\n}: LogoProps) {\n  const { resolvedTheme } = useTheme();\n  const [branding, setBranding] = useState<BrandingData>({\n    siteName: \"My Site\",\n  });\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n    fetchBranding();\n  }, []);\n\n  const fetchBranding = async () => {\n    try {\n      const response = await fetch(\"/api/settings?group=branding\");\n      if (response.ok) {\n        const data = await response.json();\n        if (data.branding) {\n          setBranding(data.branding);\n        }\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch branding:\", error);\n    }\n  };\n\n  // Determine which logo to use based on theme\n  const logoUrl =\n    mounted && resolvedTheme === \"dark\" && branding.logoDarkUrl\n      ? branding.logoDarkUrl\n      : branding.logoUrl;\n\n  const content = (\n    <div className={`flex items-center gap-2 ${className}`}>\n      {logoUrl ? (\n        <Image\n          src={logoUrl}\n          alt={branding.logoAlt || branding.siteName}\n          width={size === \"sm\" ? 24 : size === \"md\" ? 32 : 48}\n          height={size === \"sm\" ? 24 : size === \"md\" ? 32 : 48}\n          className={`${sizeClasses[size]} w-auto object-contain`}\n          priority\n        />\n      ) : (\n        // Default logo placeholder - first letter of site name\n        <div\n          className={`${sizeClasses[size]} aspect-square rounded-lg bg-primary flex items-center justify-center text-primary-foreground font-bold ${\n            size === \"sm\" ? \"text-sm\" : size === \"md\" ? \"text-base\" : \"text-xl\"\n          }`}\n        >\n          {branding.siteName.charAt(0).toUpperCase()}\n        </div>\n      )}\n      {showText && (\n        <span className={`font-semibold ${textSizeClasses[size]}`}>\n          {branding.siteName}\n        </span>\n      )}\n    </div>\n  );\n\n  if (href) {\n    return (\n      <Link href={href} className=\"hover:opacity-80 transition-opacity\">\n        {content}\n      </Link>\n    );\n  }\n\n  return content;\n}\n\nexport default Logo;\n","\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Loader2 } from \"lucide-react\";\nimport { Button } from '../ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '../ui/card';\nimport { Label } from '../ui/label';\nimport { Input } from '../ui/input';\nimport { toast } from \"sonner\";\nimport { MediaPicker } from \"./MediaPicker\";\n\ninterface BrandingData {\n  siteName: string;\n  siteTagline?: string;\n  logoUrl?: string;\n  logoAlt?: string;\n  logoDarkUrl?: string;\n  faviconUrl?: string;\n  appleTouchIconUrl?: string;\n  ogImageUrl?: string;\n  primaryColor?: string;\n  accentColor?: string;\n}\n\nexport default function BrandingSettings() {\n  const [branding, setBranding] = useState<BrandingData>({\n    siteName: \"\",\n    siteTagline: \"\",\n    logoUrl: \"\",\n    logoAlt: \"\",\n    logoDarkUrl: \"\",\n    faviconUrl: \"\",\n    appleTouchIconUrl: \"\",\n    ogImageUrl: \"\",\n    primaryColor: \"#0066cc\",\n    accentColor: \"#6366f1\",\n  });\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSaving, setIsSaving] = useState(false);\n  const [hasChanges, setHasChanges] = useState(false);\n\n  useEffect(() => {\n    fetchBranding();\n  }, []);\n\n  const fetchBranding = async () => {\n    try {\n      setIsLoading(true);\n      const response = await fetch(\"/api/settings?group=branding\");\n      if (response.ok) {\n        const data = await response.json();\n        if (data.branding) {\n          setBranding((prev) => ({ ...prev, ...data.branding }));\n        }\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch branding:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSave = async () => {\n    setIsSaving(true);\n    try {\n      const response = await fetch(\"/api/settings\", {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          group: \"branding\",\n          settings: branding,\n        }),\n      });\n\n      if (response.ok) {\n        toast.success(\"Branding settings saved successfully\");\n        setHasChanges(false);\n      } else {\n        throw new Error(\"Failed to save\");\n      }\n    } catch (error) {\n      toast.error(\"Failed to save branding settings\");\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const updateField = (field: keyof BrandingData, value: string) => {\n    setBranding((prev) => ({ ...prev, [field]: value }));\n    setHasChanges(true);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Site Identity */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Site Identity</CardTitle>\n          <CardDescription>\n            Your site name and tagline appear in headers and metadata\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"siteName\">Site Name</Label>\n              <Input\n                id=\"siteName\"\n                value={branding.siteName}\n                onChange={(e) => updateField(\"siteName\", e.target.value)}\n                placeholder=\"My Awesome Site\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"siteTagline\">Tagline</Label>\n              <Input\n                id=\"siteTagline\"\n                value={branding.siteTagline || \"\"}\n                onChange={(e) => updateField(\"siteTagline\", e.target.value)}\n                placeholder=\"Your site's slogan or description\"\n              />\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Logo */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Logo</CardTitle>\n          <CardDescription>\n            Upload your logo for light and dark themes. Recommended size: 200x50px or larger.\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          <div className=\"grid gap-6 md:grid-cols-2\">\n            {/* Light Mode Logo */}\n            <MediaPicker\n              label=\"Logo (Light Mode)\"\n              value={branding.logoUrl || \"\"}\n              onChange={(value) => updateField(\"logoUrl\", value)}\n              placeholder=\"Select or upload logo\"\n              previewSize=\"small\"\n            />\n\n            {/* Dark Mode Logo */}\n            <MediaPicker\n              label=\"Logo (Dark Mode)\"\n              value={branding.logoDarkUrl || \"\"}\n              onChange={(value) => updateField(\"logoDarkUrl\", value)}\n              placeholder=\"Select or upload dark mode logo\"\n              previewSize=\"small\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"logoAlt\">Logo Alt Text</Label>\n            <Input\n              id=\"logoAlt\"\n              value={branding.logoAlt || \"\"}\n              onChange={(e) => updateField(\"logoAlt\", e.target.value)}\n              placeholder=\"Company Logo\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              Describes the logo for accessibility and SEO\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Favicon & Icons */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Favicon & Icons</CardTitle>\n          <CardDescription>\n            Browser tab icon and mobile app icons\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid gap-6 md:grid-cols-2\">\n            {/* Favicon */}\n            <div className=\"space-y-2\">\n              <MediaPicker\n                label=\"Favicon\"\n                value={branding.faviconUrl || \"\"}\n                onChange={(value) => updateField(\"faviconUrl\", value)}\n                placeholder=\"Select or upload favicon\"\n                previewSize=\"small\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                Recommended: 32x32px .ico or .png\n              </p>\n            </div>\n\n            {/* Apple Touch Icon */}\n            <div className=\"space-y-2\">\n              <MediaPicker\n                label=\"Apple Touch Icon\"\n                value={branding.appleTouchIconUrl || \"\"}\n                onChange={(value) => updateField(\"appleTouchIconUrl\", value)}\n                placeholder=\"Select or upload icon\"\n                previewSize=\"small\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                Recommended: 180x180px .png\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Social Sharing */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Social Sharing</CardTitle>\n          <CardDescription>\n            Default image for social media shares\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <MediaPicker\n              label=\"Default Open Graph Image\"\n              value={branding.ogImageUrl || \"\"}\n              onChange={(value) => updateField(\"ogImageUrl\", value)}\n              placeholder=\"Select or upload social sharing image\"\n              previewSize=\"large\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              Recommended: 1200x630px for best display on social platforms\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Brand Colors */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Brand Colors</CardTitle>\n          <CardDescription>\n            Primary colors used throughout the site\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid gap-6 md:grid-cols-2\">\n            <div className=\"space-y-3\">\n              <Label htmlFor=\"primaryColor\">Primary Color</Label>\n              <div className=\"flex gap-3\">\n                <input\n                  type=\"color\"\n                  id=\"primaryColor\"\n                  value={branding.primaryColor || \"#0066cc\"}\n                  onChange={(e) => updateField(\"primaryColor\", e.target.value)}\n                  className=\"h-10 w-14 rounded border cursor-pointer\"\n                />\n                <Input\n                  value={branding.primaryColor || \"#0066cc\"}\n                  onChange={(e) => updateField(\"primaryColor\", e.target.value)}\n                  placeholder=\"#0066cc\"\n                  className=\"flex-1\"\n                />\n              </div>\n            </div>\n            <div className=\"space-y-3\">\n              <Label htmlFor=\"accentColor\">Accent Color</Label>\n              <div className=\"flex gap-3\">\n                <input\n                  type=\"color\"\n                  id=\"accentColor\"\n                  value={branding.accentColor || \"#6366f1\"}\n                  onChange={(e) => updateField(\"accentColor\", e.target.value)}\n                  className=\"h-10 w-14 rounded border cursor-pointer\"\n                />\n                <Input\n                  value={branding.accentColor || \"#6366f1\"}\n                  onChange={(e) => updateField(\"accentColor\", e.target.value)}\n                  placeholder=\"#6366f1\"\n                  className=\"flex-1\"\n                />\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Save Button */}\n      <div className=\"flex justify-end gap-4\">\n        <Button\n          variant=\"outline\"\n          onClick={fetchBranding}\n          disabled={!hasChanges || isSaving}\n        >\n          Cancel\n        </Button>\n        <Button onClick={handleSave} disabled={!hasChanges || isSaving}>\n          {isSaving ? (\n            <>\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              Saving...\n            </>\n          ) : (\n            \"Save Branding\"\n          )}\n        </Button>\n      </div>\n    </div>\n  );\n}\n","'use client'\n\n/**\n * Media Picker Component\n *\n * Standalone component for selecting/uploading images from the media library.\n * Can be used in any form, not just Puck editor.\n */\n\nimport React, { useState, useCallback } from 'react'\nimport { Button } from '../ui/button'\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '../ui/dialog'\nimport { Input } from '../ui/input'\nimport { Label } from '../ui/label'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../ui/tabs'\nimport { ScrollArea } from '../ui/scroll-area'\nimport { Upload, Image, Link as LinkIcon, Loader2, X, Check } from 'lucide-react'\nimport { useDropzone } from 'react-dropzone'\nimport { toast } from 'sonner'\n\ninterface MediaItem {\n  id: string\n  url: string\n  filename: string\n  alt?: string\n  width?: number\n  height?: number\n}\n\ninterface MediaPickerProps {\n  value?: string\n  onChange: (value: string) => void\n  label?: string\n  placeholder?: string\n  accept?: string[]\n  maxSize?: number // in bytes\n  aspectRatio?: 'square' | 'landscape' | 'portrait' | 'auto'\n  previewSize?: 'small' | 'medium' | 'large'\n}\n\nexport function MediaPicker({\n  value,\n  onChange,\n  label,\n  placeholder = 'Enter URL or select from library',\n  accept = ['image/*'],\n  maxSize = 10 * 1024 * 1024, // 10MB default\n  aspectRatio = 'auto',\n  previewSize = 'medium',\n}: MediaPickerProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const [activeTab, setActiveTab] = useState<'library' | 'upload' | 'url'>('library')\n  const [mediaItems, setMediaItems] = useState<MediaItem[]>([])\n  const [isLoadingMedia, setIsLoadingMedia] = useState(false)\n  const [isUploading, setIsUploading] = useState(false)\n  const [uploadProgress, setUploadProgress] = useState(0)\n  const [urlInput, setUrlInput] = useState('')\n  const [selectedMedia, setSelectedMedia] = useState<MediaItem | null>(null)\n\n  const previewSizes = {\n    small: 'max-h-16',\n    medium: 'max-h-32',\n    large: 'max-h-48',\n  }\n\n  // Load media from library\n  const loadMedia = useCallback(async () => {\n    setIsLoadingMedia(true)\n    try {\n      const response = await fetch('/api/media?type=image&limit=50&sortBy=createdAt&sortOrder=desc')\n      if (response.ok) {\n        const data = await response.json()\n        setMediaItems(data.media || [])\n      }\n    } catch (error) {\n      console.error('Failed to load media:', error)\n    } finally {\n      setIsLoadingMedia(false)\n    }\n  }, [])\n\n  // Upload a file\n  const uploadFile = useCallback(async (file: File) => {\n    setIsUploading(true)\n    setUploadProgress(0)\n\n    try {\n      // Get presigned URL\n      const presignResponse = await fetch('/api/media', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          action: 'presign',\n          filename: file.name,\n          mimeType: file.type,\n          size: file.size,\n        }),\n      })\n\n      if (!presignResponse.ok) {\n        const error = await presignResponse.json()\n        throw new Error(error.error || 'Failed to get upload URL')\n      }\n\n      const presignData = await presignResponse.json()\n      setUploadProgress(25)\n\n      // Upload to storage\n      const uploadResponse = await fetch(presignData.uploadUrl, {\n        method: 'PUT',\n        body: file,\n        headers: {\n          'Content-Type': file.type,\n        },\n      })\n\n      if (!uploadResponse.ok) {\n        throw new Error('Failed to upload file')\n      }\n\n      setUploadProgress(75)\n\n      // Complete upload\n      const completeResponse = await fetch('/api/media', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          action: 'complete',\n          filename: file.name,\n          originalName: file.name,\n          mimeType: file.type,\n          size: file.size,\n          url: presignData.publicUrl,\n          key: presignData.key,\n          bucket: presignData.bucket,\n          provider: presignData.provider,\n        }),\n      })\n\n      if (!completeResponse.ok) {\n        throw new Error('Failed to create media record')\n      }\n\n      const media = await completeResponse.json()\n      setUploadProgress(100)\n\n      // Set the URL and close\n      onChange(media.url)\n      setIsOpen(false)\n      toast.success('Image uploaded successfully')\n    } catch (error) {\n      console.error('Upload error:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to upload image')\n    } finally {\n      setIsUploading(false)\n      setUploadProgress(0)\n    }\n  }, [onChange])\n\n  // Dropzone config\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    accept: accept.reduce((acc, type) => {\n      if (type === 'image/*') {\n        return { ...acc, 'image/*': ['.png', '.jpg', '.jpeg', '.gif', '.webp', '.svg', '.ico'] }\n      }\n      return { ...acc, [type]: [] }\n    }, {}),\n    maxSize,\n    multiple: false,\n    onDrop: async (acceptedFiles) => {\n      if (acceptedFiles.length > 0) {\n        await uploadFile(acceptedFiles[0])\n      }\n    },\n  })\n\n  // Handle dialog open\n  const handleOpenChange = (open: boolean) => {\n    setIsOpen(open)\n    if (open) {\n      loadMedia()\n      setUrlInput(value || '')\n    }\n  }\n\n  // Handle URL submit\n  const handleUrlSubmit = () => {\n    if (urlInput.trim()) {\n      onChange(urlInput.trim())\n      setIsOpen(false)\n    }\n  }\n\n  // Handle media select\n  const handleMediaSelect = (media: MediaItem) => {\n    setSelectedMedia(media)\n  }\n\n  // Handle confirm selection\n  const handleConfirmSelection = () => {\n    if (selectedMedia) {\n      onChange(selectedMedia.url)\n      setIsOpen(false)\n      setSelectedMedia(null)\n    }\n  }\n\n  return (\n    <div className=\"space-y-2\">\n      {label && (\n        <Label className=\"text-sm font-medium\">{label}</Label>\n      )}\n\n      <div className=\"flex gap-2\">\n        <Input\n          value={value || ''}\n          onChange={(e) => onChange(e.target.value)}\n          placeholder={placeholder}\n          className=\"flex-1\"\n        />\n\n        <Dialog open={isOpen} onOpenChange={handleOpenChange}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" size=\"icon\" type=\"button\">\n              <Image className=\"h-4 w-4\" />\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-3xl max-h-[80vh]\">\n            <DialogHeader>\n              <DialogTitle>Select Image</DialogTitle>\n            </DialogHeader>\n\n            <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as typeof activeTab)}>\n              <TabsList className=\"grid w-full grid-cols-3\">\n                <TabsTrigger value=\"library\">\n                  <Image className=\"h-4 w-4 mr-2\" />\n                  Library\n                </TabsTrigger>\n                <TabsTrigger value=\"upload\">\n                  <Upload className=\"h-4 w-4 mr-2\" />\n                  Upload\n                </TabsTrigger>\n                <TabsTrigger value=\"url\">\n                  <LinkIcon className=\"h-4 w-4 mr-2\" />\n                  URL\n                </TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"library\" className=\"mt-4\">\n                {isLoadingMedia ? (\n                  <div className=\"flex items-center justify-center py-12\">\n                    <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n                  </div>\n                ) : mediaItems.length === 0 ? (\n                  <div className=\"text-center py-12 text-muted-foreground\">\n                    <Image className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                    <p>No images in library</p>\n                    <p className=\"text-sm\">Upload some images first</p>\n                  </div>\n                ) : (\n                  <>\n                    <ScrollArea className=\"h-[400px]\">\n                      <div className=\"grid grid-cols-4 gap-3 p-1\">\n                        {mediaItems.map((media) => (\n                          <div\n                            key={media.id}\n                            className={`relative aspect-square rounded-lg overflow-hidden cursor-pointer border-2 transition-all ${\n                              selectedMedia?.id === media.id\n                                ? 'border-primary ring-2 ring-primary/20'\n                                : 'border-transparent hover:border-muted-foreground/30'\n                            }`}\n                            onClick={() => handleMediaSelect(media)}\n                          >\n                            <img\n                              src={media.url}\n                              alt={media.alt || media.filename}\n                              className=\"w-full h-full object-cover\"\n                            />\n                            {selectedMedia?.id === media.id && (\n                              <div className=\"absolute inset-0 bg-primary/20 flex items-center justify-center\">\n                                <Check className=\"h-8 w-8 text-primary\" />\n                              </div>\n                            )}\n                          </div>\n                        ))}\n                      </div>\n                    </ScrollArea>\n                    <div className=\"flex justify-end mt-4 pt-4 border-t\">\n                      <Button\n                        onClick={handleConfirmSelection}\n                        disabled={!selectedMedia}\n                      >\n                        Select Image\n                      </Button>\n                    </div>\n                  </>\n                )}\n              </TabsContent>\n\n              <TabsContent value=\"upload\" className=\"mt-4\">\n                <div\n                  {...getRootProps()}\n                  className={`border-2 border-dashed rounded-lg p-12 text-center cursor-pointer transition-colors ${\n                    isDragActive\n                      ? 'border-primary bg-primary/5'\n                      : 'border-muted-foreground/25 hover:border-primary/50'\n                  }`}\n                >\n                  <input {...getInputProps()} />\n                  {isUploading ? (\n                    <div className=\"space-y-4\">\n                      <Loader2 className=\"h-12 w-12 mx-auto animate-spin text-primary\" />\n                      <p className=\"text-muted-foreground\">\n                        Uploading... {uploadProgress}%\n                      </p>\n                      <div className=\"w-48 mx-auto h-2 bg-muted rounded-full overflow-hidden\">\n                        <div\n                          className=\"h-full bg-primary transition-all duration-300\"\n                          style={{ width: `${uploadProgress}%` }}\n                        />\n                      </div>\n                    </div>\n                  ) : (\n                    <>\n                      <Upload className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\n                      <p className=\"text-lg font-medium\">\n                        {isDragActive ? 'Drop the image here' : 'Drag & drop an image'}\n                      </p>\n                      <p className=\"text-sm text-muted-foreground mt-2\">\n                        or click to select a file\n                      </p>\n                      <p className=\"text-xs text-muted-foreground mt-4\">\n                        PNG, JPG, GIF, WebP, SVG, or ICO up to {Math.round(maxSize / 1024 / 1024)}MB\n                      </p>\n                    </>\n                  )}\n                </div>\n              </TabsContent>\n\n              <TabsContent value=\"url\" className=\"mt-4\">\n                <div className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"imageUrl\">Image URL</Label>\n                    <Input\n                      id=\"imageUrl\"\n                      value={urlInput}\n                      onChange={(e) => setUrlInput(e.target.value)}\n                      placeholder=\"https://example.com/image.jpg\"\n                      onKeyDown={(e) => e.key === 'Enter' && handleUrlSubmit()}\n                    />\n                  </div>\n\n                  {urlInput && (\n                    <div className=\"border rounded-lg p-4\">\n                      <p className=\"text-sm text-muted-foreground mb-2\">Preview:</p>\n                      <img\n                        src={urlInput}\n                        alt=\"Preview\"\n                        className=\"max-h-48 rounded-lg mx-auto\"\n                        onError={(e) => {\n                          (e.target as HTMLImageElement).style.display = 'none'\n                        }}\n                        onLoad={(e) => {\n                          (e.target as HTMLImageElement).style.display = 'block'\n                        }}\n                      />\n                    </div>\n                  )}\n\n                  <div className=\"flex justify-end\">\n                    <Button onClick={handleUrlSubmit} disabled={!urlInput.trim()}>\n                      Use This URL\n                    </Button>\n                  </div>\n                </div>\n              </TabsContent>\n            </Tabs>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {/* Preview */}\n      {value && (\n        <div className=\"relative mt-2 rounded-lg overflow-hidden border bg-muted/30\">\n          <img\n            src={value}\n            alt=\"Selected image\"\n            className={`${previewSizes[previewSize]} w-full object-contain`}\n            onError={(e) => {\n              (e.target as HTMLImageElement).style.display = 'none'\n            }}\n          />\n          <Button\n            variant=\"destructive\"\n            size=\"icon\"\n            className=\"absolute top-2 right-2 h-6 w-6\"\n            onClick={() => onChange('')}\n          >\n            <X className=\"h-3 w-3\" />\n          </Button>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default MediaPicker\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../ui/card';\r\nimport {\r\n  Users,\r\n  TrendingUp,\r\n  Activity,\r\n  DollarSign,\r\n  Package,\r\n  ShoppingCart,\r\n  Zap\r\n} from 'lucide-react';\r\n\r\ninterface Metrics {\r\n  totalUsers: number;\r\n  activeSubscriptions: number;\r\n  trialsActive: number;\r\n  totalCustomers: number;\r\n  monthlyRevenue: number;\r\n  totalProducts: number;\r\n  totalOrders: number;\r\n  apiCallsToday: number;\r\n}\r\n\r\nexport default function DashboardMetrics() {\r\n  const [metrics, setMetrics] = useState<Metrics | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchMetrics();\r\n  }, []);\r\n\r\n  const fetchMetrics = async () => {\r\n    try {\r\n      const response = await fetch('/api/admin/dashboard/metrics');\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setMetrics(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch metrics:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n        {[...Array(8)].map((_, i) => (\r\n          <Card key={i}>\r\n            <CardHeader className=\"animate-pulse\">\r\n              <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\r\n              <div className=\"h-8 bg-gray-200 rounded w-1/2 mt-2\"></div>\r\n            </CardHeader>\r\n          </Card>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!metrics) {\r\n    return null;\r\n  }\r\n\r\n  const cards = [\r\n    {\r\n      title: 'Total Users',\r\n      value: metrics.totalUsers,\r\n      icon: Users,\r\n      description: 'Registered user accounts',\r\n      color: 'text-blue-600'\r\n    },\r\n    {\r\n      title: 'Active Subscriptions',\r\n      value: metrics.activeSubscriptions,\r\n      icon: TrendingUp,\r\n      description: 'Paying customers',\r\n      color: 'text-green-600'\r\n    },\r\n    {\r\n      title: 'Active Trials',\r\n      value: metrics.trialsActive,\r\n      icon: Activity,\r\n      description: 'Trial accounts',\r\n      color: 'text-yellow-600'\r\n    },\r\n    {\r\n      title: 'Total Customers',\r\n      value: metrics.totalCustomers,\r\n      icon: Users,\r\n      description: 'End users across all businesses',\r\n      color: 'text-purple-600'\r\n    },\r\n    {\r\n      title: 'Monthly Revenue',\r\n      value: `$${metrics.monthlyRevenue.toLocaleString()}`,\r\n      icon: DollarSign,\r\n      description: 'Recurring revenue',\r\n      color: 'text-green-600'\r\n    },\r\n    {\r\n      title: 'Total Products',\r\n      value: metrics.totalProducts,\r\n      icon: Package,\r\n      description: 'Products across all stores',\r\n      color: 'text-orange-600'\r\n    },\r\n    {\r\n      title: 'Total Orders',\r\n      value: metrics.totalOrders,\r\n      icon: ShoppingCart,\r\n      description: 'Orders this month',\r\n      color: 'text-indigo-600'\r\n    },\r\n    {\r\n      title: 'API Calls Today',\r\n      value: metrics.apiCallsToday.toLocaleString(),\r\n      icon: Zap,\r\n      description: 'Platform API usage',\r\n      color: 'text-pink-600'\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n      {cards.map((card, index) => {\r\n        const Icon = card.icon;\r\n        return (\r\n          <Card key={index}>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">\r\n                {card.title}\r\n              </CardTitle>\r\n              <Icon className={`h-4 w-4 ${card.color}`} />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold\">{card.value}</div>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                {card.description}\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}","'use client';\r\n\r\nimport { Button } from '../ui/button';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../ui/card';\r\nimport {\r\n  Plus,\r\n  Download,\r\n  Mail,\r\n  Settings,\r\n  FileText,\r\n  Package,\r\n  TrendingUp\r\n} from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useCMSConfig } from '../../contexts/CMSConfigContext';\r\n\r\nexport default function QuickActions() {\r\n  const router = useRouter();\r\n  const { buildPath } = useCMSConfig();\r\n\r\n  const actions = [\r\n    {\r\n      title: 'Add Product',\r\n      description: 'Create a new product',\r\n      icon: Plus,\r\n      action: () => router.push(buildPath('/admin/products/new')),\r\n      variant: 'default' as const\r\n    },\r\n    {\r\n      title: 'View Analytics',\r\n      description: 'Performance metrics',\r\n      icon: TrendingUp,\r\n      action: () => router.push(buildPath('/admin/analytics')),\r\n      variant: 'outline' as const\r\n    },\r\n    {\r\n      title: 'New Blog Post',\r\n      description: 'Write a new article',\r\n      icon: FileText,\r\n      action: () => router.push(buildPath('/admin/blog/new')),\r\n      variant: 'outline' as const\r\n    },\r\n    {\r\n      title: 'Export Data',\r\n      description: 'Download reports',\r\n      icon: Download,\r\n      action: () => handleExport(),\r\n      variant: 'outline' as const\r\n    },\r\n    {\r\n      title: 'Email Marketing',\r\n      description: 'Send email campaigns',\r\n      icon: Mail,\r\n      action: () => router.push(buildPath('/admin/email-marketing')),\r\n      variant: 'outline' as const\r\n    },\r\n    {\r\n      title: 'System Settings',\r\n      description: 'Configure settings',\r\n      icon: Settings,\r\n      action: () => router.push(buildPath('/admin/settings')),\r\n      variant: 'outline' as const\r\n    }\r\n  ];\r\n\r\n  const handleExport = async () => {\r\n    try {\r\n      const response = await fetch('/api/admin/export');\r\n      if (response.ok) {\r\n        const blob = await response.blob();\r\n        const url = window.URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `platform-report-${new Date().toISOString().split('T')[0]}.csv`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        window.URL.revokeObjectURL(url);\r\n        document.body.removeChild(a);\r\n      }\r\n    } catch (error) {\r\n      console.error('Export failed:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <CardTitle>Quick Actions</CardTitle>\r\n        <CardDescription>Common administrative tasks</CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"grid gap-2 md:grid-cols-2 lg:grid-cols-3\">\r\n          {actions.map((action, index) => {\r\n            const Icon = action.icon;\r\n            return (\r\n              <Button\r\n                key={index}\r\n                variant={action.variant}\r\n                className=\"justify-start\"\r\n                onClick={action.action}\r\n              >\r\n                <Icon className=\"mr-2 h-4 w-4\" />\r\n                <div className=\"text-left\">\r\n                  <div className=\"font-medium\">{action.title}</div>\r\n                  <div className=\"text-xs opacity-70\">{action.description}</div>\r\n                </div>\r\n              </Button>\r\n            );\r\n          })}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}","'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Database,\n  Shield,\n  CreditCard,\n  Truck,\n  HardDrive,\n  Mail,\n  BarChart,\n  Bot,\n  Settings,\n  Check,\n  Loader2,\n  AlertCircle,\n  Eye,\n  EyeOff,\n  RefreshCw,\n  Search,\n  Upload,\n  Download,\n  ChevronRight,\n  Info,\n  X,\n} from 'lucide-react';\nimport { cn } from '../../lib/utils';\nimport { toast } from 'sonner';\nimport { Button } from '../ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../ui/card';\nimport { Input } from '../ui/input';\nimport { Label } from '../ui/label';\nimport { Badge } from '../ui/badge';\nimport { Separator } from '../ui/separator';\nimport { Progress } from '../ui/progress';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../ui/tabs';\nimport { Alert, AlertDescription } from '../ui/alert';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '../ui/dialog';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '../ui/tooltip';\nimport { Textarea } from '../ui/textarea';\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '../ui/accordion';\n\n// Types based on lib/env/types.ts\ntype EnvCategory =\n  | 'database'\n  | 'auth'\n  | 'payments'\n  | 'shipping'\n  | 'storage'\n  | 'email'\n  | 'analytics'\n  | 'ai'\n  | 'general';\n\ninterface DisplayEnvVar {\n  key: string;\n  category: EnvCategory;\n  label: string;\n  description: string;\n  required: boolean;\n  sensitive: boolean;\n  public: boolean;\n  configured: boolean;\n  source: 'database' | 'env_file' | 'system' | 'none';\n  maskedValue?: string;\n  placeholder?: string;\n}\n\ninterface EnvHealth {\n  total: number;\n  configured: number;\n  required: number;\n  requiredConfigured: number;\n  missingRequired: string[];\n  categories: Record<EnvCategory, { total: number; configured: number }>;\n}\n\n// Category icons mapping\nconst CATEGORY_ICONS: Record<EnvCategory, React.ElementType> = {\n  database: Database,\n  auth: Shield,\n  payments: CreditCard,\n  shipping: Truck,\n  storage: HardDrive,\n  email: Mail,\n  analytics: BarChart,\n  ai: Bot,\n  general: Settings,\n};\n\nconst CATEGORY_LABELS: Record<EnvCategory, string> = {\n  database: 'Database',\n  auth: 'Authentication',\n  payments: 'Payments',\n  shipping: 'Shipping',\n  storage: 'Storage',\n  email: 'Email',\n  analytics: 'Analytics',\n  ai: 'AI',\n  general: 'General',\n};\n\nexport default function EnvManager() {\n  const [variables, setVariables] = useState<DisplayEnvVar[]>([]);\n  const [health, setHealth] = useState<EnvHealth | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [activeCategory, setActiveCategory] = useState<EnvCategory | 'all'>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [editingVar, setEditingVar] = useState<DisplayEnvVar | null>(null);\n  const [editValue, setEditValue] = useState('');\n  const [showValue, setShowValue] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [showImportDialog, setShowImportDialog] = useState(false);\n  const [importText, setImportText] = useState('');\n  const [isImporting, setIsImporting] = useState(false);\n\n  const loadEnvVars = useCallback(async () => {\n    try {\n      const [varsRes, healthRes] = await Promise.all([\n        fetch('/api/env'),\n        fetch('/api/env?health=true'),\n      ]);\n\n      if (varsRes.ok) {\n        const data = await varsRes.json();\n        setVariables(data.variables || []);\n      }\n\n      if (healthRes.ok) {\n        const data = await healthRes.json();\n        setHealth(data);\n      }\n    } catch (error) {\n      console.error('Error loading env vars:', error);\n      toast.error('Failed to load environment variables');\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadEnvVars();\n  }, [loadEnvVars]);\n\n  const handleSaveVar = async () => {\n    if (!editingVar) return;\n\n    setIsSaving(true);\n    try {\n      const response = await fetch('/api/env', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          key: editingVar.key,\n          value: editValue,\n        }),\n      });\n\n      if (!response.ok) {\n        const data = await response.json();\n        throw new Error(data.error || 'Failed to save');\n      }\n\n      toast.success(`${editingVar.label} has been updated`);\n      setEditingVar(null);\n      setEditValue('');\n      setShowValue(false);\n      loadEnvVars();\n    } catch (error) {\n      toast.error(error instanceof Error ? error.message : 'Failed to save');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleDeleteVar = async (key: string) => {\n    try {\n      const response = await fetch('/api/env', {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ key }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to delete');\n      }\n\n      toast.success('Environment variable removed');\n      loadEnvVars();\n    } catch (error) {\n      toast.error('Failed to delete environment variable');\n    }\n  };\n\n  const handleImport = async () => {\n    if (!importText.trim()) return;\n\n    setIsImporting(true);\n    try {\n      const response = await fetch('/api/env/import', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ envString: importText, overwrite: false }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Import failed');\n      }\n\n      const data = await response.json();\n      toast.success(`Imported ${data.imported} variables (${data.skipped} skipped)`);\n\n      if (data.errors?.length > 0) {\n        toast.warning(`${data.errors.length} errors occurred during import`);\n      }\n\n      setShowImportDialog(false);\n      setImportText('');\n      loadEnvVars();\n    } catch (error) {\n      toast.error('Failed to import environment variables');\n    } finally {\n      setIsImporting(false);\n    }\n  };\n\n  const filteredVariables = variables.filter((v) => {\n    const matchesCategory = activeCategory === 'all' || v.category === activeCategory;\n    const matchesSearch =\n      !searchQuery ||\n      v.key.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      v.label.toLowerCase().includes(searchQuery.toLowerCase());\n    return matchesCategory && matchesSearch;\n  });\n\n  const groupedVariables = filteredVariables.reduce((acc, v) => {\n    if (!acc[v.category]) {\n      acc[v.category] = [];\n    }\n    acc[v.category].push(v);\n    return acc;\n  }, {} as Record<EnvCategory, DisplayEnvVar[]>);\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-20 bg-muted rounded-lg\" />\n          <div className=\"h-64 bg-muted rounded-lg\" />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <TooltipProvider>\n      <div className=\"space-y-6\">\n        {/* Health Overview */}\n        {health && (\n          <Card>\n            <CardHeader className=\"pb-2\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <CardTitle className=\"text-lg\">Configuration Health</CardTitle>\n                  <CardDescription>\n                    {health.requiredConfigured}/{health.required} required variables configured\n                  </CardDescription>\n                </div>\n                <Button variant=\"outline\" size=\"sm\" onClick={loadEnvVars}>\n                  <RefreshCw className=\"h-4 w-4 mr-2\" />\n                  Refresh\n                </Button>\n              </div>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between text-sm\">\n                  <span>Overall Progress</span>\n                  <span>\n                    {health.configured}/{health.total} ({Math.round((health.configured / health.total) * 100)}%)\n                  </span>\n                </div>\n                <Progress value={(health.configured / health.total) * 100} />\n              </div>\n\n              {health.missingRequired.length > 0 && (\n                <Alert variant=\"destructive\">\n                  <AlertCircle className=\"h-4 w-4\" />\n                  <AlertDescription>\n                    <span className=\"font-medium\">Missing required variables: </span>\n                    {health.missingRequired.join(', ')}\n                  </AlertDescription>\n                </Alert>\n              )}\n\n              {/* Category Progress Grid */}\n              <div className=\"grid grid-cols-3 md:grid-cols-5 gap-2 pt-2\">\n                {(Object.keys(health.categories) as EnvCategory[]).map((cat) => {\n                  const Icon = CATEGORY_ICONS[cat];\n                  const catHealth = health.categories[cat];\n                  const percentage = catHealth.total > 0\n                    ? Math.round((catHealth.configured / catHealth.total) * 100)\n                    : 0;\n                  return (\n                    <Tooltip key={cat}>\n                      <TooltipTrigger asChild>\n                        <button\n                          className={cn(\n                            'p-3 rounded-lg border text-center transition-colors',\n                            activeCategory === cat\n                              ? 'border-primary bg-primary/5'\n                              : 'hover:bg-muted/50'\n                          )}\n                          onClick={() => setActiveCategory(cat)}\n                        >\n                          <Icon className=\"h-5 w-5 mx-auto mb-1 text-muted-foreground\" />\n                          <div className=\"text-xs font-medium truncate\">{CATEGORY_LABELS[cat]}</div>\n                          <div className=\"text-xs text-muted-foreground\">\n                            {catHealth.configured}/{catHealth.total}\n                          </div>\n                        </button>\n                      </TooltipTrigger>\n                      <TooltipContent>\n                        <p>{CATEGORY_LABELS[cat]}: {percentage}% configured</p>\n                      </TooltipContent>\n                    </Tooltip>\n                  );\n                })}\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Actions Bar */}\n        <div className=\"flex flex-col sm:flex-row gap-4\">\n          <div className=\"relative flex-1\">\n            <Search className=\"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground\" />\n            <Input\n              placeholder=\"Search variables...\"\n              className=\"pl-9\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n          </div>\n          <div className=\"flex gap-2\">\n            <Button\n              variant={activeCategory === 'all' ? 'default' : 'outline'}\n              onClick={() => setActiveCategory('all')}\n            >\n              All\n            </Button>\n            <Button variant=\"outline\" onClick={() => setShowImportDialog(true)}>\n              <Upload className=\"h-4 w-4 mr-2\" />\n              Import\n            </Button>\n          </div>\n        </div>\n\n        {/* Variables List */}\n        <Accordion type=\"multiple\" defaultValue={Object.keys(groupedVariables)} className=\"space-y-4\">\n          {(Object.entries(groupedVariables) as [EnvCategory, DisplayEnvVar[]][]).map(\n            ([category, vars]) => {\n              const Icon = CATEGORY_ICONS[category];\n              return (\n                <AccordionItem key={category} value={category} className=\"border rounded-lg\">\n                  <AccordionTrigger className=\"px-4 hover:no-underline hover:bg-muted/50\">\n                    <div className=\"flex items-center gap-3\">\n                      <Icon className=\"h-5 w-5 text-muted-foreground\" />\n                      <span className=\"font-medium\">{CATEGORY_LABELS[category]}</span>\n                      <Badge variant=\"secondary\" className=\"ml-2\">\n                        {vars.filter((v) => v.configured).length}/{vars.length}\n                      </Badge>\n                    </div>\n                  </AccordionTrigger>\n                  <AccordionContent className=\"px-4 pb-4\">\n                    <div className=\"space-y-3\">\n                      {vars.map((v) => (\n                        <div\n                          key={v.key}\n                          className={cn(\n                            'p-4 rounded-lg border',\n                            !v.configured && v.required && 'border-destructive/50 bg-destructive/5'\n                          )}\n                        >\n                          <div className=\"flex items-start justify-between gap-4\">\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"flex items-center gap-2 flex-wrap\">\n                                <span className=\"font-mono text-sm font-medium\">{v.key}</span>\n                                {v.required && (\n                                  <Badge variant=\"destructive\" className=\"text-xs\">\n                                    Required\n                                  </Badge>\n                                )}\n                                {v.sensitive && (\n                                  <Badge variant=\"secondary\" className=\"text-xs\">\n                                    <Shield className=\"h-3 w-3 mr-1\" />\n                                    Encrypted\n                                  </Badge>\n                                )}\n                                {v.public && (\n                                  <Badge variant=\"outline\" className=\"text-xs\">\n                                    Public\n                                  </Badge>\n                                )}\n                              </div>\n                              <p className=\"text-sm text-muted-foreground mt-1\">{v.description}</p>\n                              <div className=\"flex items-center gap-2 mt-2\">\n                                {v.configured ? (\n                                  <div className=\"flex items-center text-sm text-green-600 dark:text-green-400\">\n                                    <Check className=\"h-4 w-4 mr-1\" />\n                                    <span className=\"font-mono\">{v.maskedValue}</span>\n                                    <Badge variant=\"outline\" className=\"ml-2 text-xs\">\n                                      {v.source === 'database' ? 'Database' : 'ENV File'}\n                                    </Badge>\n                                  </div>\n                                ) : (\n                                  <span className=\"text-sm text-muted-foreground italic\">\n                                    Not configured\n                                  </span>\n                                )}\n                              </div>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => {\n                                  setEditingVar(v);\n                                  setEditValue('');\n                                  setShowValue(false);\n                                }}\n                              >\n                                {v.configured ? 'Update' : 'Configure'}\n                              </Button>\n                              {v.configured && v.source === 'database' && (\n                                <Tooltip>\n                                  <TooltipTrigger asChild>\n                                    <Button\n                                      variant=\"ghost\"\n                                      size=\"icon\"\n                                      className=\"h-8 w-8 text-destructive\"\n                                      onClick={() => handleDeleteVar(v.key)}\n                                    >\n                                      <X className=\"h-4 w-4\" />\n                                    </Button>\n                                  </TooltipTrigger>\n                                  <TooltipContent>\n                                    <p>Remove from database</p>\n                                  </TooltipContent>\n                                </Tooltip>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </AccordionContent>\n                </AccordionItem>\n              );\n            }\n          )}\n        </Accordion>\n\n        {filteredVariables.length === 0 && (\n          <Card>\n            <CardContent className=\"py-8 text-center\">\n              <p className=\"text-muted-foreground\">No environment variables found matching your search.</p>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Edit Dialog */}\n        <Dialog open={!!editingVar} onOpenChange={() => setEditingVar(null)}>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>\n                {editingVar?.configured ? 'Update' : 'Configure'} {editingVar?.label}\n              </DialogTitle>\n              <DialogDescription>\n                {editingVar?.description}\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"space-y-4 py-4\">\n              <div className=\"space-y-2\">\n                <Label className=\"flex items-center gap-2\">\n                  <span className=\"font-mono text-sm\">{editingVar?.key}</span>\n                  {editingVar?.sensitive && (\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      <Shield className=\"h-3 w-3 mr-1\" />\n                      Will be encrypted\n                    </Badge>\n                  )}\n                </Label>\n                <div className=\"relative\">\n                  <Input\n                    type={showValue || !editingVar?.sensitive ? 'text' : 'password'}\n                    value={editValue}\n                    onChange={(e) => setEditValue(e.target.value)}\n                    placeholder={editingVar?.placeholder || 'Enter value...'}\n                  />\n                  {editingVar?.sensitive && (\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"absolute right-2 top-1/2 -translate-y-1/2 h-7 w-7\"\n                      onClick={() => setShowValue(!showValue)}\n                    >\n                      {showValue ? (\n                        <EyeOff className=\"h-4 w-4\" />\n                      ) : (\n                        <Eye className=\"h-4 w-4\" />\n                      )}\n                    </Button>\n                  )}\n                </div>\n                {editingVar?.placeholder && (\n                  <p className=\"text-xs text-muted-foreground\">\n                    Example: {editingVar.placeholder}\n                  </p>\n                )}\n              </div>\n\n              {editingVar?.configured && editingVar.source === 'env_file' && (\n                <Alert>\n                  <Info className=\"h-4 w-4\" />\n                  <AlertDescription>\n                    This variable is currently set in your .env file. Setting it here will\n                    override the file value with an encrypted database value.\n                  </AlertDescription>\n                </Alert>\n              )}\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setEditingVar(null)}>\n                Cancel\n              </Button>\n              <Button onClick={handleSaveVar} disabled={!editValue || isSaving}>\n                {isSaving ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                    Saving...\n                  </>\n                ) : (\n                  <>\n                    <Check className=\"h-4 w-4 mr-2\" />\n                    Save\n                  </>\n                )}\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n\n        {/* Import Dialog */}\n        <Dialog open={showImportDialog} onOpenChange={setShowImportDialog}>\n          <DialogContent className=\"max-w-2xl\">\n            <DialogHeader>\n              <DialogTitle>Import Environment Variables</DialogTitle>\n              <DialogDescription>\n                Paste your .env file contents below. Only recognized variables will be imported.\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"space-y-4 py-4\">\n              <Textarea\n                value={importText}\n                onChange={(e) => setImportText(e.target.value)}\n                placeholder={`# Paste your .env contents here\nDATABASE_URL=postgresql://...\nSTRIPE_SECRET_KEY=sk_live_...`}\n                className=\"font-mono text-sm h-64\"\n              />\n              <Alert>\n                <Info className=\"h-4 w-4\" />\n                <AlertDescription>\n                  Existing values will not be overwritten. Only new variables will be imported.\n                  Sensitive values will be automatically encrypted.\n                </AlertDescription>\n              </Alert>\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setShowImportDialog(false)}>\n                Cancel\n              </Button>\n              <Button onClick={handleImport} disabled={!importText.trim() || isImporting}>\n                {isImporting ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                    Importing...\n                  </>\n                ) : (\n                  <>\n                    <Upload className=\"h-4 w-4 mr-2\" />\n                    Import\n                  </>\n                )}\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </TooltipProvider>\n  );\n}\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from '../../lib/utils'\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from '../../lib/utils'\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from '../../lib/utils'\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport { toast } from 'sonner'\nimport {\n  Save,\n  Loader2,\n  CheckCircle,\n  XCircle,\n  Eye,\n  EyeOff,\n  Mail,\n  Server,\n  Send,\n} from 'lucide-react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../ui/card'\nimport { Label } from '../ui/label'\nimport { Input } from '../ui/input'\nimport { Button } from '../ui/button'\nimport { Switch } from '../ui/switch'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../ui/select'\nimport { Alert, AlertDescription } from '../ui/alert'\n\ninterface EmailSettings {\n  provider: 'smtp' | 'sendgrid' | 'resend' | 'mailgun' | 'ses'\n  fromName?: string\n  fromEmail?: string\n  smtpHost?: string\n  smtpPort?: number\n  smtpUser?: string\n  smtpPass?: string\n  smtpSecure?: boolean\n  sendgridApiKey?: string\n  resendApiKey?: string\n  mailgunApiKey?: string\n  mailgunDomain?: string\n  sesAccessKeyId?: string\n  sesSecretAccessKey?: string\n  sesRegion?: string\n}\n\ninterface EnvVar {\n  name: string\n  configured: boolean\n  required: boolean\n  group: string\n  description: string\n}\n\nexport default function EmailProviderSettings() {\n  const [loading, setLoading] = useState(true)\n  const [saving, setSaving] = useState(false)\n  const [testing, setTesting] = useState(false)\n  const [envVars, setEnvVars] = useState<EnvVar[]>([])\n  const [showSecrets, setShowSecrets] = useState<Record<string, boolean>>({})\n\n  const [form, setForm] = useState<EmailSettings>({\n    provider: 'smtp',\n    fromName: '',\n    fromEmail: '',\n    smtpHost: '',\n    smtpPort: 587,\n    smtpUser: '',\n    smtpPass: '',\n    smtpSecure: false,\n    sendgridApiKey: '',\n    resendApiKey: '',\n    mailgunApiKey: '',\n    mailgunDomain: '',\n    sesAccessKeyId: '',\n    sesSecretAccessKey: '',\n    sesRegion: 'us-east-1',\n  })\n\n  useEffect(() => {\n    fetchSettings()\n  }, [])\n\n  const fetchSettings = async () => {\n    try {\n      const response = await fetch('/api/admin/settings')\n      const data = await response.json()\n      if (data.success) {\n        if (data.settings.email) {\n          setForm((prev) => ({\n            ...prev,\n            ...data.settings.email,\n          }))\n        }\n        if (data.settings.envVars) {\n          setEnvVars(data.settings.envVars.filter((v: EnvVar) => v.group === 'email'))\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching settings:', error)\n      toast.error('Failed to load email settings')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const saveSettings = async () => {\n    setSaving(true)\n    try {\n      const response = await fetch('/api/admin/settings', {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          group: 'email',\n          settings: form,\n        }),\n      })\n\n      const data = await response.json()\n      if (data.success) {\n        toast.success('Email settings saved successfully')\n        // Update form with masked values\n        if (data.settings.email) {\n          setForm((prev) => ({\n            ...prev,\n            ...data.settings.email,\n          }))\n        }\n      } else {\n        toast.error(data.error || 'Failed to save settings')\n      }\n    } catch (error) {\n      console.error('Error saving settings:', error)\n      toast.error('Failed to save settings')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const sendTestEmail = async () => {\n    setTesting(true)\n    try {\n      const response = await fetch('/api/emails/send-test', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          email: form.fromEmail,\n          subject: 'Test Email from CMS',\n          content: '<h1>Test Email</h1><p>Your email configuration is working correctly!</p>',\n        }),\n      })\n\n      const data = await response.json()\n      if (data.success) {\n        toast.success(`Test email sent to ${form.fromEmail}`)\n      } else {\n        toast.error(data.error || 'Failed to send test email')\n      }\n    } catch (error) {\n      console.error('Error sending test email:', error)\n      toast.error('Failed to send test email')\n    } finally {\n      setTesting(false)\n    }\n  }\n\n  const toggleSecret = (key: string) => {\n    setShowSecrets((prev) => ({ ...prev, [key]: !prev[key] }))\n  }\n\n  const renderSecretInput = (\n    label: string,\n    key: keyof EmailSettings,\n    placeholder: string\n  ) => {\n    const value = (form[key] as string) || ''\n    const isVisible = showSecrets[key]\n    const isMasked = value === '********'\n\n    return (\n      <div className=\"space-y-2\">\n        <Label>{label}</Label>\n        <div className=\"relative\">\n          <Input\n            type={isVisible ? 'text' : 'password'}\n            value={value}\n            onChange={(e) => setForm((prev) => ({ ...prev, [key]: e.target.value }))}\n            placeholder={isMasked ? 'Enter new value to change' : placeholder}\n          />\n          <button\n            type=\"button\"\n            onClick={() => toggleSecret(key)}\n            className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n          >\n            {isVisible ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n          </button>\n        </div>\n        {isMasked && (\n          <p className=\"text-xs text-muted-foreground\">\n            Value is configured. Enter a new value to change it.\n          </p>\n        )}\n      </div>\n    )\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Mail className=\"h-5 w-5\" />\n            Email Provider\n          </CardTitle>\n          <CardDescription>\n            Configure your email sending provider. SMTP (nodemailer) allows unlimited sending with your own mail server.\n            All credentials are encrypted in the database.\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {/* Provider Selection */}\n          <div className=\"space-y-2\">\n            <Label>Email Provider</Label>\n            <div className=\"grid grid-cols-5 gap-2\">\n              {(['smtp', 'sendgrid', 'resend', 'mailgun', 'ses'] as const).map((provider) => (\n                <Button\n                  key={provider}\n                  variant={form.provider === provider ? 'default' : 'outline'}\n                  onClick={() => setForm((prev) => ({ ...prev, provider }))}\n                  className=\"w-full\"\n                >\n                  {provider === 'smtp' ? 'SMTP' : provider === 'ses' ? 'AWS SES' : provider.charAt(0).toUpperCase() + provider.slice(1)}\n                </Button>\n              ))}\n            </div>\n          </div>\n\n          {/* From Settings */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label>From Name</Label>\n              <Input\n                value={form.fromName || ''}\n                onChange={(e) => setForm((prev) => ({ ...prev, fromName: e.target.value }))}\n                placeholder=\"Your Company\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>From Email</Label>\n              <Input\n                type=\"email\"\n                value={form.fromEmail || ''}\n                onChange={(e) => setForm((prev) => ({ ...prev, fromEmail: e.target.value }))}\n                placeholder=\"noreply@yourdomain.com\"\n              />\n            </div>\n          </div>\n\n          {/* SMTP Settings */}\n          {form.provider === 'smtp' && (\n            <div className=\"space-y-4 pt-4 border-t\">\n              <div className=\"flex items-center gap-2\">\n                <Server className=\"h-4 w-4\" />\n                <h3 className=\"font-medium\">SMTP Settings (Nodemailer)</h3>\n              </div>\n              <Alert>\n                <AlertDescription>\n                  Use your own mail server for unlimited email sending without per-email costs.\n                </AlertDescription>\n              </Alert>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label>SMTP Host</Label>\n                  <Input\n                    value={form.smtpHost || ''}\n                    onChange={(e) => setForm((prev) => ({ ...prev, smtpHost: e.target.value }))}\n                    placeholder=\"smtp.yourdomain.com\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label>SMTP Port</Label>\n                  <Input\n                    type=\"number\"\n                    value={form.smtpPort || 587}\n                    onChange={(e) => setForm((prev) => ({ ...prev, smtpPort: parseInt(e.target.value) }))}\n                    placeholder=\"587\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label>SMTP Username</Label>\n                  <Input\n                    value={form.smtpUser || ''}\n                    onChange={(e) => setForm((prev) => ({ ...prev, smtpUser: e.target.value }))}\n                    placeholder=\"username\"\n                  />\n                </div>\n                {renderSecretInput('SMTP Password', 'smtpPass', 'Enter password')}\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Switch\n                  id=\"smtp-secure\"\n                  checked={form.smtpSecure || false}\n                  onCheckedChange={(checked) => setForm((prev) => ({ ...prev, smtpSecure: checked }))}\n                />\n                <Label htmlFor=\"smtp-secure\">Use TLS/SSL (typically port 465)</Label>\n              </div>\n            </div>\n          )}\n\n          {/* SendGrid Settings */}\n          {form.provider === 'sendgrid' && (\n            <div className=\"space-y-4 pt-4 border-t\">\n              <h3 className=\"font-medium\">SendGrid Settings</h3>\n              {renderSecretInput('API Key', 'sendgridApiKey', 'SG.xxxxxx')}\n            </div>\n          )}\n\n          {/* Resend Settings */}\n          {form.provider === 'resend' && (\n            <div className=\"space-y-4 pt-4 border-t\">\n              <h3 className=\"font-medium\">Resend Settings</h3>\n              {renderSecretInput('API Key', 'resendApiKey', 're_xxxxxx')}\n            </div>\n          )}\n\n          {/* Mailgun Settings */}\n          {form.provider === 'mailgun' && (\n            <div className=\"space-y-4 pt-4 border-t\">\n              <h3 className=\"font-medium\">Mailgun Settings</h3>\n              <div className=\"grid grid-cols-2 gap-4\">\n                {renderSecretInput('API Key', 'mailgunApiKey', 'key-xxxxxx')}\n                <div className=\"space-y-2\">\n                  <Label>Domain</Label>\n                  <Input\n                    value={form.mailgunDomain || ''}\n                    onChange={(e) => setForm((prev) => ({ ...prev, mailgunDomain: e.target.value }))}\n                    placeholder=\"mg.yourdomain.com\"\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* AWS SES Settings */}\n          {form.provider === 'ses' && (\n            <div className=\"space-y-4 pt-4 border-t\">\n              <h3 className=\"font-medium\">AWS SES Settings</h3>\n              <div className=\"grid grid-cols-2 gap-4\">\n                {renderSecretInput('Access Key ID', 'sesAccessKeyId', 'AKIAXXXXXXXX')}\n                {renderSecretInput('Secret Access Key', 'sesSecretAccessKey', 'xxxxxx')}\n                <div className=\"space-y-2\">\n                  <Label>Region</Label>\n                  <Select\n                    value={form.sesRegion || 'us-east-1'}\n                    onValueChange={(value) => setForm((prev) => ({ ...prev, sesRegion: value }))}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"us-east-1\">US East (N. Virginia)</SelectItem>\n                      <SelectItem value=\"us-west-2\">US West (Oregon)</SelectItem>\n                      <SelectItem value=\"eu-west-1\">EU (Ireland)</SelectItem>\n                      <SelectItem value=\"eu-central-1\">EU (Frankfurt)</SelectItem>\n                      <SelectItem value=\"ap-southeast-1\">Asia Pacific (Singapore)</SelectItem>\n                      <SelectItem value=\"ap-southeast-2\">Asia Pacific (Sydney)</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Environment Variables Status */}\n      {envVars.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-base\">Environment Variables</CardTitle>\n            <CardDescription>\n              Settings configured in the database take precedence over environment variables.\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-2 gap-2\">\n              {envVars.map((envVar) => (\n                <div key={envVar.name} className=\"flex items-center gap-2 text-sm\">\n                  {envVar.configured ? (\n                    <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                  ) : (\n                    <XCircle className=\"h-4 w-4 text-muted-foreground/30\" />\n                  )}\n                  <span className={envVar.configured ? '' : 'text-muted-foreground'}>\n                    {envVar.name}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Actions */}\n      <div className=\"flex justify-between\">\n        <Button\n          variant=\"outline\"\n          onClick={sendTestEmail}\n          disabled={testing || !form.fromEmail}\n        >\n          {testing ? (\n            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n          ) : (\n            <Send className=\"mr-2 h-4 w-4\" />\n          )}\n          Send Test Email\n        </Button>\n        <Button onClick={saveSettings} disabled={saving}>\n          {saving ? (\n            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n          ) : (\n            <Save className=\"mr-2 h-4 w-4\" />\n          )}\n          Save Settings\n        </Button>\n      </div>\n    </div>\n  )\n}\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitive from \"@radix-ui/react-switch\"\n\nimport { cn } from '../../lib/utils'\n\nfunction Switch({\n  className,\n  ...props\n}: React.ComponentProps<typeof SwitchPrimitive.Root>) {\n  return (\n    <SwitchPrimitive.Root\n      data-slot=\"switch\"\n      className={cn(\n        \"peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <SwitchPrimitive.Thumb\n        data-slot=\"switch-thumb\"\n        className={cn(\n          \"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0\"\n        )}\n      />\n    </SwitchPrimitive.Root>\n  )\n}\n\nexport { Switch }\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"lucide-react\"\n\nimport { cn } from '../../lib/utils'\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = \"default\",\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: \"sm\" | \"default\"\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = \"item-aligned\",\n  align = \"center\",\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md\",\n          position === \"popper\" &&\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n          className\n        )}\n        position={position}\n        align={align}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            \"p-1\",\n            position === \"popper\" &&\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\"\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn(\"text-muted-foreground px-2 py-1.5 text-xs\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className\n      )}\n      {...props}\n    >\n      <span\n        data-slot=\"select-item-indicator\"\n        className=\"absolute right-2 flex size-3.5 items-center justify-center\"\n      >\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n","'use client'\n\nimport { useState, useCallback, useEffect } from 'react'\nimport { useMedia } from '../../../hooks/use-media'\nimport { useMediaUpload } from '../../../hooks/use-media-upload'\nimport { MediaGrid } from './MediaGrid'\nimport { MediaList } from './MediaList'\nimport { MediaToolbar } from './MediaToolbar'\nimport { MediaFolderTree } from './MediaFolderTree'\nimport { MediaBulkActions } from './MediaBulkActions'\nimport { MediaPreviewSheet } from './MediaPreviewSheet'\nimport { MediaUploader } from './MediaUploader'\nimport { FolderDialog } from './FolderDialog'\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from '../../ui/dialog'\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '../../ui/alert-dialog'\nimport {\n  Alert,\n  AlertDescription,\n  AlertTitle,\n} from '../../ui/alert'\nimport { Button } from '../../ui/button'\nimport { Input } from '../../ui/input'\nimport { Label } from '../../ui/label'\nimport { AlertTriangle, Settings } from 'lucide-react'\nimport Link from 'next/link'\nimport type { MediaWithRelations, FolderWithRelations } from '../../../lib/media/types'\n\ninterface StorageConfigStatus {\n  configured: boolean\n  provider: string\n  missingFields: string[]\n  message: string\n}\n\nexport function MediaManager() {\n  const mediaState = useMedia()\n  const [storageStatus, setStorageStatus] = useState<StorageConfigStatus | null>(null)\n\n  // Check storage configuration on mount\n  useEffect(() => {\n    async function checkStorage() {\n      try {\n        const response = await fetch('/api/media/storage-status')\n        if (response.ok) {\n          const status = await response.json()\n          setStorageStatus(status)\n        }\n      } catch (error) {\n        console.error('Failed to check storage status:', error)\n      }\n    }\n    checkStorage()\n  }, [])\n  const {\n    media,\n    folders,\n    tags,\n    selectedIds,\n    viewMode,\n    filters,\n    loading,\n    error,\n    pagination,\n    setViewMode,\n    setFilters,\n    setPage,\n    selectItem,\n    toggleItem,\n    selectAll,\n    clearSelection,\n    deleteSelected,\n    moveSelected,\n    tagSelected,\n    refreshAll,\n  } = mediaState\n\n  // Upload state\n  const { uploads, isUploading, uploadFiles, clearCompleted } = useMediaUpload({\n    folderId: filters.folderId,\n    onSuccess: () => refreshAll(),\n  })\n\n  // Dialog states\n  const [showUploader, setShowUploader] = useState(false)\n  const [showFolderDialog, setShowFolderDialog] = useState(false)\n  const [editingFolder, setEditingFolder] = useState<FolderWithRelations | null>(null)\n  const [previewMedia, setPreviewMedia] = useState<MediaWithRelations | null>(null)\n  const [renameMedia, setRenameMedia] = useState<MediaWithRelations | null>(null)\n  const [renameName, setRenameName] = useState('')\n  const [deleteConfirm, setDeleteConfirm] = useState<{ ids: string[]; hard: boolean } | null>(null)\n\n  // Handlers\n  const handleFolderSelect = useCallback(\n    (folderId: string | null | undefined) => {\n      setFilters({ folderId: folderId === null ? null : folderId })\n    },\n    [setFilters]\n  )\n\n  const handleCreateFolder = useCallback(async (data: any) => {\n    const response = await fetch('/api/media/folders', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data),\n    })\n\n    if (!response.ok) {\n      throw new Error('Failed to create folder')\n    }\n\n    await refreshAll()\n  }, [refreshAll])\n\n  const handleUpdateFolder = useCallback(async (id: string, data: any) => {\n    const response = await fetch(`/api/media/folders/${id}`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data),\n    })\n\n    if (!response.ok) {\n      throw new Error('Failed to update folder')\n    }\n\n    await refreshAll()\n  }, [refreshAll])\n\n  const handleMoveMedia = useCallback(\n    async (mediaId: string, folderId: string | null) => {\n      const response = await fetch('/api/media/bulk', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          operation: 'move',\n          mediaIds: [mediaId],\n          folderId,\n        }),\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to move media')\n      }\n\n      await refreshAll()\n    },\n    [refreshAll]\n  )\n\n  const handleAddTag = useCallback(\n    async (mediaId: string, tagId: string) => {\n      const response = await fetch('/api/media/bulk', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          operation: 'tag',\n          mediaIds: [mediaId],\n          tagIds: [tagId],\n        }),\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to add tag')\n      }\n\n      await refreshAll()\n    },\n    [refreshAll]\n  )\n\n  const handleDeleteMedia = useCallback((mediaId: string) => {\n    setDeleteConfirm({ ids: [mediaId], hard: false })\n  }, [])\n\n  const handleBulkDelete = useCallback(() => {\n    setDeleteConfirm({ ids: Array.from(selectedIds), hard: false })\n  }, [selectedIds])\n\n  const confirmDelete = useCallback(async () => {\n    if (!deleteConfirm) return\n\n    if (deleteConfirm.ids.length === 1) {\n      const response = await fetch(\n        `/api/media/${deleteConfirm.ids[0]}?hard=${deleteConfirm.hard}`,\n        { method: 'DELETE' }\n      )\n      if (!response.ok) {\n        throw new Error('Failed to delete media')\n      }\n    } else {\n      await deleteSelected(deleteConfirm.hard)\n    }\n\n    setDeleteConfirm(null)\n    await refreshAll()\n  }, [deleteConfirm, deleteSelected, refreshAll])\n\n  const handleRename = useCallback((media: MediaWithRelations) => {\n    setRenameMedia(media)\n    setRenameName(media.title || media.filename)\n  }, [])\n\n  const handleSaveRename = useCallback(async () => {\n    if (!renameMedia || !renameName.trim()) return\n\n    const response = await fetch(`/api/media/${renameMedia.id}`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ title: renameName.trim() }),\n    })\n\n    if (!response.ok) {\n      throw new Error('Failed to rename media')\n    }\n\n    setRenameMedia(null)\n    await refreshAll()\n  }, [renameMedia, renameName, refreshAll])\n\n  const handleSaveMediaDetails = useCallback(\n    async (id: string, data: any) => {\n      const response = await fetch(`/api/media/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to update media')\n      }\n\n      await refreshAll()\n    },\n    [refreshAll]\n  )\n\n  return (\n    <div className=\"flex flex-col h-[calc(100vh-12rem)]\">\n      {/* Storage configuration warning */}\n      {storageStatus && !storageStatus.configured && (\n        <Alert variant=\"destructive\" className=\"mx-6 mt-4 mb-0\">\n          <AlertTriangle className=\"h-4 w-4\" />\n          <AlertTitle>Storage Not Configured</AlertTitle>\n          <AlertDescription className=\"flex items-center justify-between\">\n            <span>{storageStatus.message}</span>\n            <Button variant=\"outline\" size=\"sm\" asChild className=\"ml-4\">\n              <Link href=\"/admin/settings?tab=storage\">\n                <Settings className=\"h-4 w-4 mr-2\" />\n                Configure Storage\n              </Link>\n            </Button>\n          </AlertDescription>\n        </Alert>\n      )}\n\n      <div className=\"flex flex-1 min-h-0\">\n        {/* Sidebar */}\n        <div className=\"w-64 border-r flex-shrink-0\">\n          <MediaFolderTree\n          folders={folders}\n          selectedFolderId={filters.folderId}\n          onSelectFolder={handleFolderSelect}\n          onCreateFolder={() => {\n            setEditingFolder(null)\n            setShowFolderDialog(true)\n          }}\n        />\n      </div>\n\n      {/* Main content */}\n      <div className=\"flex-1 flex flex-col min-w-0\">\n        {/* Toolbar */}\n        <div className=\"p-4 border-b\">\n          <MediaToolbar\n            viewMode={viewMode}\n            filters={filters}\n            onViewModeChange={setViewMode}\n            onSearch={(search) => setFilters({ search })}\n            onTypeFilter={(type) => setFilters({ type })}\n            onSortChange={(sortBy, sortOrder) => setFilters({ sortBy, sortOrder })}\n            onUpload={() => setShowUploader(true)}\n          />\n        </div>\n\n        {/* Bulk actions */}\n        {selectedIds.size > 0 && (\n          <div className=\"px-4 pt-4\">\n            <MediaBulkActions\n              selectedCount={selectedIds.size}\n              folders={folders}\n              tags={tags}\n              onClearSelection={clearSelection}\n              onMove={moveSelected}\n              onTag={tagSelected}\n              onDelete={handleBulkDelete}\n            />\n          </div>\n        )}\n\n        {/* Content */}\n        <div className=\"flex-1 p-4 overflow-auto\">\n          {viewMode === 'grid' ? (\n            <MediaGrid\n              media={media}\n              selectedIds={selectedIds}\n              folders={folders}\n              tags={tags}\n              loading={loading}\n              onSelect={selectItem}\n              onToggle={toggleItem}\n              onClick={setPreviewMedia}\n              onPreview={setPreviewMedia}\n              onMove={handleMoveMedia}\n              onAddTag={handleAddTag}\n              onDelete={handleDeleteMedia}\n              onRename={handleRename}\n              onEditDetails={setPreviewMedia}\n              onViewUsage={setPreviewMedia}\n            />\n          ) : (\n            <MediaList\n              media={media}\n              selectedIds={selectedIds}\n              folders={folders}\n              tags={tags}\n              loading={loading}\n              onSelect={selectItem}\n              onToggle={toggleItem}\n              onSelectAll={selectAll}\n              onClick={setPreviewMedia}\n              onPreview={setPreviewMedia}\n              onMove={handleMoveMedia}\n              onAddTag={handleAddTag}\n              onDelete={handleDeleteMedia}\n              onRename={handleRename}\n              onEditDetails={setPreviewMedia}\n              onViewUsage={setPreviewMedia}\n            />\n          )}\n        </div>\n\n        {/* Pagination */}\n        {pagination.totalPages > 1 && (\n          <div className=\"p-4 border-t flex items-center justify-between\">\n            <p className=\"text-sm text-muted-foreground\">\n              Showing {(pagination.page - 1) * pagination.limit + 1} to{' '}\n              {Math.min(pagination.page * pagination.limit, pagination.total)} of{' '}\n              {pagination.total} items\n            </p>\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setPage(pagination.page - 1)}\n                disabled={pagination.page <= 1}\n              >\n                Previous\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setPage(pagination.page + 1)}\n                disabled={pagination.page >= pagination.totalPages}\n              >\n                Next\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n      </div>\n\n      {/* Upload dialog */}\n      <Dialog open={showUploader} onOpenChange={setShowUploader}>\n        <DialogContent className=\"sm:max-w-lg\">\n          <DialogHeader>\n            <DialogTitle>Upload Media</DialogTitle>\n          </DialogHeader>\n          <MediaUploader\n            folderId={filters.folderId}\n            uploads={uploads}\n            isUploading={isUploading}\n            onUpload={uploadFiles}\n            onClearCompleted={clearCompleted}\n          />\n        </DialogContent>\n      </Dialog>\n\n      {/* Folder dialog */}\n      <FolderDialog\n        open={showFolderDialog}\n        folder={editingFolder}\n        folders={folders}\n        onClose={() => {\n          setShowFolderDialog(false)\n          setEditingFolder(null)\n        }}\n        onSave={async (data) => {\n          if (editingFolder) {\n            await handleUpdateFolder(editingFolder.id, data)\n          } else {\n            await handleCreateFolder(data)\n          }\n        }}\n      />\n\n      {/* Preview sheet */}\n      <MediaPreviewSheet\n        media={previewMedia}\n        open={!!previewMedia}\n        onClose={() => setPreviewMedia(null)}\n        onSave={handleSaveMediaDetails}\n        onDelete={(id) => {\n          setPreviewMedia(null)\n          setDeleteConfirm({ ids: [id], hard: false })\n        }}\n      />\n\n      {/* Rename dialog */}\n      <Dialog open={!!renameMedia} onOpenChange={(open) => !open && setRenameMedia(null)}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Rename Media</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div>\n              <Label htmlFor=\"rename\">Name</Label>\n              <Input\n                id=\"rename\"\n                value={renameName}\n                onChange={(e) => setRenameName(e.target.value)}\n                onKeyDown={(e) => e.key === 'Enter' && handleSaveRename()}\n                autoFocus\n              />\n            </div>\n          </div>\n          <div className=\"flex justify-end gap-2\">\n            <Button variant=\"outline\" onClick={() => setRenameMedia(null)}>\n              Cancel\n            </Button>\n            <Button onClick={handleSaveRename} disabled={!renameName.trim()}>\n              Save\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete confirmation */}\n      <AlertDialog\n        open={!!deleteConfirm}\n        onOpenChange={(open) => !open && setDeleteConfirm(null)}\n      >\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Media</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to delete{' '}\n              {deleteConfirm?.ids.length === 1\n                ? 'this item'\n                : `${deleteConfirm?.ids.length} items`}\n              ? This action cannot be undone.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={confirmDelete}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n            >\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  )\n}\n","'use client'\n\nimport { useState, useCallback, useEffect } from 'react'\nimport type {\n  MediaWithRelations,\n  MediaFilters,\n  ViewMode,\n  MediaType,\n  FolderTree,\n  TagWithCount,\n} from '../lib/media/types'\n\ninterface UseMediaState {\n  media: MediaWithRelations[]\n  folders: FolderTree[]\n  tags: TagWithCount[]\n  selectedIds: Set<string>\n  viewMode: ViewMode\n  filters: MediaFilters\n  loading: boolean\n  error: string | null\n  pagination: {\n    page: number\n    limit: number\n    total: number\n    totalPages: number\n  }\n}\n\ninterface UseMediaActions {\n  fetchMedia: () => Promise<void>\n  fetchFolders: () => Promise<void>\n  fetchTags: () => Promise<void>\n  setViewMode: (mode: ViewMode) => void\n  setFilters: (filters: Partial<MediaFilters>) => void\n  setPage: (page: number) => void\n  selectItem: (id: string) => void\n  toggleItem: (id: string) => void\n  selectAll: () => void\n  clearSelection: () => void\n  deleteSelected: (hard?: boolean) => Promise<void>\n  moveSelected: (folderId: string | null) => Promise<void>\n  tagSelected: (tagIds: string[]) => Promise<void>\n  refreshAll: () => Promise<void>\n}\n\nconst DEFAULT_FILTERS: MediaFilters = {\n  page: 1,\n  limit: 50,\n  sortBy: 'createdAt',\n  sortOrder: 'desc',\n  includeDeleted: false,\n}\n\nexport function useMedia(): UseMediaState & UseMediaActions {\n  const [media, setMedia] = useState<MediaWithRelations[]>([])\n  const [folders, setFolders] = useState<FolderTree[]>([])\n  const [tags, setTags] = useState<TagWithCount[]>([])\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set())\n  const [viewMode, setViewModeState] = useState<ViewMode>('grid')\n  const [filters, setFiltersState] = useState<MediaFilters>(DEFAULT_FILTERS)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [pagination, setPagination] = useState({\n    page: 1,\n    limit: 50,\n    total: 0,\n    totalPages: 0,\n  })\n\n  // Load view mode from localStorage\n  useEffect(() => {\n    const saved = localStorage.getItem('media-view-mode')\n    if (saved === 'grid' || saved === 'list') {\n      setViewModeState(saved)\n    }\n  }, [])\n\n  const setViewMode = useCallback((mode: ViewMode) => {\n    setViewModeState(mode)\n    localStorage.setItem('media-view-mode', mode)\n  }, [])\n\n  const setFilters = useCallback((newFilters: Partial<MediaFilters>) => {\n    setFiltersState((prev) => ({ ...prev, ...newFilters, page: 1 }))\n  }, [])\n\n  const setPage = useCallback((page: number) => {\n    setFiltersState((prev) => ({ ...prev, page }))\n  }, [])\n\n  const fetchMedia = useCallback(async () => {\n    setLoading(true)\n    setError(null)\n\n    try {\n      const params = new URLSearchParams()\n\n      if (filters.folderId !== undefined) {\n        params.set('folderId', filters.folderId === null ? 'null' : filters.folderId)\n      }\n      if (filters.type) params.set('type', filters.type)\n      if (filters.search) params.set('search', filters.search)\n      if (filters.tagIds?.length) params.set('tagIds', filters.tagIds.join(','))\n      if (filters.includeDeleted) params.set('includeDeleted', 'true')\n      if (filters.page) params.set('page', filters.page.toString())\n      if (filters.limit) params.set('limit', filters.limit.toString())\n      if (filters.sortBy) params.set('sortBy', filters.sortBy)\n      if (filters.sortOrder) params.set('sortOrder', filters.sortOrder)\n\n      const response = await fetch(`/api/media?${params}`)\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch media')\n      }\n\n      const data = await response.json()\n\n      // Ensure we always set an array, even if API returns an error object\n      // API returns { media: [...] } so check for data.media first, then data.items for backwards compatibility\n      const mediaItems = Array.isArray(data.media) ? data.media : Array.isArray(data.items) ? data.items : Array.isArray(data) ? data : []\n      setMedia(mediaItems)\n      setPagination({\n        page: data.page || 1,\n        limit: data.limit || 50,\n        total: data.total || mediaItems.length || 0,\n        totalPages: data.totalPages || 1,\n      })\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to fetch media')\n      setMedia([])\n    } finally {\n      setLoading(false)\n    }\n  }, [filters])\n\n  const fetchFolders = useCallback(async () => {\n    try {\n      const response = await fetch('/api/media/folders?tree=true')\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch folders')\n      }\n\n      const data = await response.json()\n      // Ensure we always set an array, even if API returns an error object\n      setFolders(Array.isArray(data) ? data : [])\n    } catch (err) {\n      console.error('Failed to fetch folders:', err)\n      setFolders([])\n    }\n  }, [])\n\n  const fetchTags = useCallback(async () => {\n    try {\n      const response = await fetch('/api/media/tags')\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch tags')\n      }\n\n      const data = await response.json()\n      // Ensure we always set an array, even if API returns an error object\n      setTags(Array.isArray(data) ? data : [])\n    } catch (err) {\n      console.error('Failed to fetch tags:', err)\n      setTags([])\n    }\n  }, [])\n\n  const selectItem = useCallback((id: string) => {\n    setSelectedIds(new Set([id]))\n  }, [])\n\n  const toggleItem = useCallback((id: string) => {\n    setSelectedIds((prev) => {\n      const newSet = new Set(prev)\n      if (newSet.has(id)) {\n        newSet.delete(id)\n      } else {\n        newSet.add(id)\n      }\n      return newSet\n    })\n  }, [])\n\n  const selectAll = useCallback(() => {\n    setSelectedIds(new Set(media.map((m) => m.id)))\n  }, [media])\n\n  const clearSelection = useCallback(() => {\n    setSelectedIds(new Set())\n  }, [])\n\n  const deleteSelected = useCallback(\n    async (hard = false) => {\n      if (selectedIds.size === 0) return\n\n      try {\n        const response = await fetch('/api/media/bulk', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            operation: 'delete',\n            mediaIds: Array.from(selectedIds),\n            hard,\n          }),\n        })\n\n        if (!response.ok) {\n          throw new Error('Failed to delete media')\n        }\n\n        clearSelection()\n        await fetchMedia()\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to delete media')\n      }\n    },\n    [selectedIds, clearSelection, fetchMedia]\n  )\n\n  const moveSelected = useCallback(\n    async (folderId: string | null) => {\n      if (selectedIds.size === 0) return\n\n      try {\n        const response = await fetch('/api/media/bulk', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            operation: 'move',\n            mediaIds: Array.from(selectedIds),\n            folderId,\n          }),\n        })\n\n        if (!response.ok) {\n          throw new Error('Failed to move media')\n        }\n\n        clearSelection()\n        await fetchMedia()\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to move media')\n      }\n    },\n    [selectedIds, clearSelection, fetchMedia]\n  )\n\n  const tagSelected = useCallback(\n    async (tagIds: string[]) => {\n      if (selectedIds.size === 0 || tagIds.length === 0) return\n\n      try {\n        const response = await fetch('/api/media/bulk', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            operation: 'tag',\n            mediaIds: Array.from(selectedIds),\n            tagIds,\n          }),\n        })\n\n        if (!response.ok) {\n          throw new Error('Failed to tag media')\n        }\n\n        clearSelection()\n        await fetchMedia()\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to tag media')\n      }\n    },\n    [selectedIds, clearSelection, fetchMedia]\n  )\n\n  const refreshAll = useCallback(async () => {\n    await Promise.all([fetchMedia(), fetchFolders(), fetchTags()])\n  }, [fetchMedia, fetchFolders, fetchTags])\n\n  // Fetch on filter change\n  useEffect(() => {\n    fetchMedia()\n  }, [fetchMedia])\n\n  // Initial load\n  useEffect(() => {\n    fetchFolders()\n    fetchTags()\n  }, [fetchFolders, fetchTags])\n\n  return {\n    media,\n    folders,\n    tags,\n    selectedIds,\n    viewMode,\n    filters,\n    loading,\n    error,\n    pagination,\n    fetchMedia,\n    fetchFolders,\n    fetchTags,\n    setViewMode,\n    setFilters,\n    setPage,\n    selectItem,\n    toggleItem,\n    selectAll,\n    clearSelection,\n    deleteSelected,\n    moveSelected,\n    tagSelected,\n    refreshAll,\n  }\n}\n","'use client'\n\nimport { forwardRef, useState } from 'react'\nimport Image from 'next/image'\nimport { cn } from '../../../lib/utils'\nimport { Checkbox } from '../../ui/checkbox'\nimport { Badge } from '../../ui/badge'\nimport { getMediaType, formatFileSize, getMediaTypeIcon } from '../../../lib/media/types'\nimport type { MediaWithRelations } from '../../../lib/media/types'\nimport {\n  FileText,\n  Film,\n  Music,\n  ImageIcon,\n  File,\n  MoreVertical,\n  AlertCircle,\n} from 'lucide-react'\n\ninterface MediaCardProps {\n  media: MediaWithRelations\n  selected: boolean\n  onSelect: () => void\n  onToggle: () => void\n  onClick: () => void\n  onContextMenu?: (e: React.MouseEvent) => void\n}\n\nconst typeIcons = {\n  image: ImageIcon,\n  video: Film,\n  audio: Music,\n  document: FileText,\n  other: File,\n}\n\nexport const MediaCard = forwardRef<HTMLDivElement, MediaCardProps>(\n  ({ media, selected, onSelect, onToggle, onClick, onContextMenu }, ref) => {\n    const mediaType = getMediaType(media.mimeType)\n    const Icon = typeIcons[mediaType]\n    const [imageError, setImageError] = useState(false)\n\n    // Validate URL format\n    const isValidUrl = (url: string) => {\n      try {\n        new URL(url)\n        return true\n      } catch {\n        return false\n      }\n    }\n\n    const hasValidUrl = media.url && isValidUrl(media.url)\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          'group relative bg-card rounded-lg border cursor-pointer transition-all hover:shadow-md',\n          selected && 'ring-2 ring-primary'\n        )}\n        onClick={onClick}\n        onContextMenu={onContextMenu}\n      >\n        {/* Selection checkbox */}\n        <div\n          className={cn(\n            'absolute top-2 left-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity',\n            selected && 'opacity-100'\n          )}\n          onClick={(e) => e.stopPropagation()}\n        >\n          <Checkbox\n            checked={selected}\n            onCheckedChange={() => onToggle()}\n            className=\"bg-background/80 backdrop-blur-sm\"\n          />\n        </div>\n\n        {/* Thumbnail */}\n        <div className=\"aspect-square relative bg-muted rounded-t-lg overflow-hidden\">\n          {mediaType === 'image' && hasValidUrl && !imageError ? (\n            <Image\n              src={media.url}\n              alt={media.alt || media.filename}\n              fill\n              className=\"object-cover\"\n              sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n              onError={() => setImageError(true)}\n              unoptimized={!media.url.includes('.r2.dev') && !media.url.includes('.amazonaws.com')}\n            />\n          ) : imageError || !hasValidUrl ? (\n            <div className=\"w-full h-full flex flex-col items-center justify-center gap-2 text-muted-foreground\">\n              <AlertCircle className=\"h-12 w-12\" />\n              <span className=\"text-xs\">Image unavailable</span>\n            </div>\n          ) : (\n            <div className=\"w-full h-full flex items-center justify-center\">\n              <Icon className=\"h-16 w-16 text-muted-foreground\" />\n            </div>\n          )}\n\n          {/* Type badge for non-images */}\n          {mediaType !== 'image' && (\n            <Badge\n              variant=\"secondary\"\n              className=\"absolute bottom-2 right-2 text-xs\"\n            >\n              {media.mimeType.split('/')[1]?.toUpperCase() || mediaType}\n            </Badge>\n          )}\n        </div>\n\n        {/* Info */}\n        <div className=\"p-3\">\n          <p className=\"font-medium text-sm truncate\" title={media.title || media.filename}>\n            {media.title || media.filename}\n          </p>\n          <p className=\"text-xs text-muted-foreground mt-1\">\n            {formatFileSize(media.size)}\n            {media.width && media.height && (\n              <span className=\"ml-2\">\n                {media.width}  {media.height}\n              </span>\n            )}\n          </p>\n\n          {/* Tags */}\n          {media.tags && media.tags.length > 0 && (\n            <div className=\"flex flex-wrap gap-1 mt-2\">\n              {media.tags.slice(0, 3).map((tagRelation) => (\n                <Badge\n                  key={tagRelation.tag.id}\n                  variant=\"outline\"\n                  className=\"text-xs py-0\"\n                  style={\n                    tagRelation.tag.color\n                      ? { borderColor: tagRelation.tag.color }\n                      : undefined\n                  }\n                >\n                  {tagRelation.tag.name}\n                </Badge>\n              ))}\n              {media.tags.length > 3 && (\n                <Badge variant=\"outline\" className=\"text-xs py-0\">\n                  +{media.tags.length - 3}\n                </Badge>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    )\n  }\n)\n\nMediaCard.displayName = 'MediaCard'\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from '../../lib/utils'\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from '../../lib/utils'\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","'use client'\n\nimport { useState } from 'react'\nimport {\n  ContextMenu,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuSeparator,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuTrigger,\n} from '../../ui/context-menu'\nimport type { MediaWithRelations, FolderTree, TagWithCount } from '../../../lib/media/types'\nimport {\n  Eye,\n  ExternalLink,\n  Copy,\n  Download,\n  Pencil,\n  FolderInput,\n  Tags,\n  FileSearch,\n  Trash,\n  FolderIcon,\n  Tag,\n} from 'lucide-react'\n\ninterface MediaContextMenuProps {\n  children: React.ReactNode\n  media: MediaWithRelations\n  folders: FolderTree[]\n  tags: TagWithCount[]\n  onPreview: () => void\n  onOpenInNewTab: () => void\n  onCopyUrl: () => void\n  onDownload: () => void\n  onRename: () => void\n  onEditDetails: () => void\n  onMove: (folderId: string | null) => void\n  onAddTag: (tagId: string) => void\n  onViewUsage: () => void\n  onDelete: () => void\n}\n\nexport function MediaContextMenu({\n  children,\n  media,\n  folders,\n  tags,\n  onPreview,\n  onOpenInNewTab,\n  onCopyUrl,\n  onDownload,\n  onRename,\n  onEditDetails,\n  onMove,\n  onAddTag,\n  onViewUsage,\n  onDelete,\n}: MediaContextMenuProps) {\n  const existingTagIds = new Set(media.tags?.map((t) => t.tag.id) || [])\n\n  const renderFolderOptions = (folders: FolderTree[], depth = 0) => {\n    return folders.map((folder) => (\n      <div key={folder.id}>\n        <ContextMenuItem\n          onClick={() => onMove(folder.id)}\n          disabled={media.folderId === folder.id}\n        >\n          <span style={{ paddingLeft: depth * 12 }}>\n            <FolderIcon className=\"mr-2 h-4 w-4 inline\" />\n            {folder.name}\n          </span>\n        </ContextMenuItem>\n        {folder.children &&\n          folder.children.length > 0 &&\n          renderFolderOptions(folder.children, depth + 1)}\n      </div>\n    ))\n  }\n\n  return (\n    <ContextMenu>\n      <ContextMenuTrigger asChild>{children}</ContextMenuTrigger>\n      <ContextMenuContent className=\"w-64\">\n        <ContextMenuItem onClick={onPreview}>\n          <Eye className=\"mr-2 h-4 w-4\" />\n          Preview\n        </ContextMenuItem>\n        <ContextMenuItem onClick={onOpenInNewTab}>\n          <ExternalLink className=\"mr-2 h-4 w-4\" />\n          Open in new tab\n        </ContextMenuItem>\n        <ContextMenuItem onClick={onCopyUrl}>\n          <Copy className=\"mr-2 h-4 w-4\" />\n          Copy URL\n        </ContextMenuItem>\n        <ContextMenuItem onClick={onDownload}>\n          <Download className=\"mr-2 h-4 w-4\" />\n          Download\n        </ContextMenuItem>\n\n        <ContextMenuSeparator />\n\n        <ContextMenuItem onClick={onRename}>\n          <Pencil className=\"mr-2 h-4 w-4\" />\n          Rename\n        </ContextMenuItem>\n        <ContextMenuItem onClick={onEditDetails}>\n          <Pencil className=\"mr-2 h-4 w-4\" />\n          Edit details\n        </ContextMenuItem>\n\n        <ContextMenuSub>\n          <ContextMenuSubTrigger>\n            <FolderInput className=\"mr-2 h-4 w-4\" />\n            Move to folder\n          </ContextMenuSubTrigger>\n          <ContextMenuSubContent className=\"w-48 max-h-64 overflow-y-auto\">\n            <ContextMenuItem\n              onClick={() => onMove(null)}\n              disabled={media.folderId === null}\n            >\n              <FolderIcon className=\"mr-2 h-4 w-4\" />\n              Root (No folder)\n            </ContextMenuItem>\n            <ContextMenuSeparator />\n            {folders.length > 0 ? (\n              renderFolderOptions(folders)\n            ) : (\n              <ContextMenuItem disabled>No folders available</ContextMenuItem>\n            )}\n          </ContextMenuSubContent>\n        </ContextMenuSub>\n\n        <ContextMenuSub>\n          <ContextMenuSubTrigger>\n            <Tags className=\"mr-2 h-4 w-4\" />\n            Add tags\n          </ContextMenuSubTrigger>\n          <ContextMenuSubContent className=\"w-48 max-h-64 overflow-y-auto\">\n            {tags.length > 0 ? (\n              tags.map((tag) => (\n                <ContextMenuItem\n                  key={tag.id}\n                  onClick={() => onAddTag(tag.id)}\n                  disabled={existingTagIds.has(tag.id)}\n                >\n                  <Tag\n                    className=\"mr-2 h-4 w-4\"\n                    style={tag.color ? { color: tag.color } : undefined}\n                  />\n                  {tag.name}\n                  {existingTagIds.has(tag.id) && (\n                    <span className=\"ml-auto text-xs text-muted-foreground\">\n                      Added\n                    </span>\n                  )}\n                </ContextMenuItem>\n              ))\n            ) : (\n              <ContextMenuItem disabled>No tags available</ContextMenuItem>\n            )}\n          </ContextMenuSubContent>\n        </ContextMenuSub>\n\n        <ContextMenuSeparator />\n\n        <ContextMenuItem onClick={onViewUsage}>\n          <FileSearch className=\"mr-2 h-4 w-4\" />\n          View usage\n        </ContextMenuItem>\n\n        <ContextMenuSeparator />\n\n        <ContextMenuItem onClick={onDelete} className=\"text-destructive\">\n          <Trash className=\"mr-2 h-4 w-4\" />\n          Delete\n        </ContextMenuItem>\n      </ContextMenuContent>\n    </ContextMenu>\n  )\n}\n","import { cn } from '../../lib/utils'\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","'use client'\n\nimport { MediaCard } from './MediaCard'\nimport { MediaContextMenu } from './MediaContextMenu'\nimport type { MediaWithRelations, FolderTree, TagWithCount } from '../../../lib/media/types'\nimport { Skeleton } from '../../ui/skeleton'\n\ninterface MediaGridProps {\n  media: MediaWithRelations[]\n  selectedIds: Set<string>\n  folders: FolderTree[]\n  tags: TagWithCount[]\n  loading: boolean\n  onSelect: (id: string) => void\n  onToggle: (id: string) => void\n  onClick: (media: MediaWithRelations) => void\n  onPreview: (media: MediaWithRelations) => void\n  onMove: (mediaId: string, folderId: string | null) => void\n  onAddTag: (mediaId: string, tagId: string) => void\n  onDelete: (mediaId: string) => void\n  onRename: (media: MediaWithRelations) => void\n  onEditDetails: (media: MediaWithRelations) => void\n  onViewUsage: (media: MediaWithRelations) => void\n}\n\nexport function MediaGrid({\n  media,\n  selectedIds,\n  folders,\n  tags,\n  loading,\n  onSelect,\n  onToggle,\n  onClick,\n  onPreview,\n  onMove,\n  onAddTag,\n  onDelete,\n  onRename,\n  onEditDetails,\n  onViewUsage,\n}: MediaGridProps) {\n  if (loading) {\n    return (\n      <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4\">\n        {Array.from({ length: 12 }).map((_, i) => (\n          <div key={i} className=\"space-y-2\">\n            <Skeleton className=\"aspect-square rounded-lg\" />\n            <Skeleton className=\"h-4 w-3/4\" />\n            <Skeleton className=\"h-3 w-1/2\" />\n          </div>\n        ))}\n      </div>\n    )\n  }\n\n  if (media.length === 0) {\n    return (\n      <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n        <p className=\"text-muted-foreground\">No media files found</p>\n        <p className=\"text-sm text-muted-foreground mt-1\">\n          Upload files or change your filters\n        </p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4\">\n      {media.map((item) => (\n        <MediaContextMenu\n          key={item.id}\n          media={item}\n          folders={folders}\n          tags={tags}\n          onPreview={() => onPreview(item)}\n          onOpenInNewTab={() => window.open(item.url, '_blank')}\n          onCopyUrl={() => navigator.clipboard.writeText(item.url)}\n          onDownload={() => {\n            const a = document.createElement('a')\n            a.href = item.url\n            a.download = item.filename\n            a.click()\n          }}\n          onRename={() => onRename(item)}\n          onEditDetails={() => onEditDetails(item)}\n          onMove={(folderId) => onMove(item.id, folderId)}\n          onAddTag={(tagId) => onAddTag(item.id, tagId)}\n          onViewUsage={() => onViewUsage(item)}\n          onDelete={() => onDelete(item.id)}\n        >\n          <MediaCard\n            media={item}\n            selected={selectedIds.has(item.id)}\n            onSelect={() => onSelect(item.id)}\n            onToggle={() => onToggle(item.id)}\n            onClick={() => onClick(item)}\n          />\n        </MediaContextMenu>\n      ))}\n    </div>\n  )\n}\n","'use client'\n\nimport { forwardRef } from 'react'\nimport Image from 'next/image'\nimport { cn } from '../../../lib/utils'\nimport { Checkbox } from '../../ui/checkbox'\nimport { Badge } from '../../ui/badge'\nimport { TableCell, TableRow } from '../../ui/table'\nimport { getMediaType, formatFileSize } from '../../../lib/media/types'\nimport type { MediaWithRelations } from '../../../lib/media/types'\nimport { format } from 'date-fns'\nimport {\n  FileText,\n  Film,\n  Music,\n  ImageIcon,\n  File,\n  MoreVertical,\n} from 'lucide-react'\n\ninterface MediaRowProps {\n  media: MediaWithRelations\n  selected: boolean\n  onSelect: () => void\n  onToggle: () => void\n  onClick: () => void\n  onContextMenu?: (e: React.MouseEvent) => void\n}\n\nconst typeIcons = {\n  image: ImageIcon,\n  video: Film,\n  audio: Music,\n  document: FileText,\n  other: File,\n}\n\nexport const MediaRow = forwardRef<HTMLTableRowElement, MediaRowProps>(\n  ({ media, selected, onSelect, onToggle, onClick, onContextMenu }, ref) => {\n    const mediaType = getMediaType(media.mimeType)\n    const Icon = typeIcons[mediaType]\n\n    return (\n      <TableRow\n        ref={ref}\n        className={cn('cursor-pointer', selected && 'bg-accent')}\n        onClick={onClick}\n        onContextMenu={onContextMenu}\n      >\n        <TableCell onClick={(e) => e.stopPropagation()}>\n          <Checkbox checked={selected} onCheckedChange={() => onToggle()} />\n        </TableCell>\n\n        <TableCell className=\"w-12\">\n          <div className=\"w-10 h-10 relative bg-muted rounded overflow-hidden\">\n            {mediaType === 'image' ? (\n              <Image\n                src={media.url}\n                alt={media.alt || media.filename}\n                fill\n                className=\"object-cover\"\n                sizes=\"40px\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center\">\n                <Icon className=\"h-5 w-5 text-muted-foreground\" />\n              </div>\n            )}\n          </div>\n        </TableCell>\n\n        <TableCell>\n          <div>\n            <p className=\"font-medium truncate max-w-[200px]\">\n              {media.title || media.filename}\n            </p>\n            <p className=\"text-xs text-muted-foreground\">{media.filename}</p>\n          </div>\n        </TableCell>\n\n        <TableCell>\n          <Badge variant=\"outline\" className=\"text-xs\">\n            {mediaType}\n          </Badge>\n        </TableCell>\n\n        <TableCell className=\"text-muted-foreground\">\n          {formatFileSize(media.size)}\n        </TableCell>\n\n        <TableCell className=\"text-muted-foreground\">\n          {media.width && media.height\n            ? `${media.width}  ${media.height}`\n            : '-'}\n        </TableCell>\n\n        <TableCell>\n          {media.tags && media.tags.length > 0 && (\n            <div className=\"flex flex-wrap gap-1\">\n              {media.tags.slice(0, 2).map((tagRelation) => (\n                <Badge\n                  key={tagRelation.tag.id}\n                  variant=\"outline\"\n                  className=\"text-xs py-0\"\n                  style={\n                    tagRelation.tag.color\n                      ? { borderColor: tagRelation.tag.color }\n                      : undefined\n                  }\n                >\n                  {tagRelation.tag.name}\n                </Badge>\n              ))}\n              {media.tags.length > 2 && (\n                <Badge variant=\"outline\" className=\"text-xs py-0\">\n                  +{media.tags.length - 2}\n                </Badge>\n              )}\n            </div>\n          )}\n        </TableCell>\n\n        <TableCell className=\"text-muted-foreground text-sm\">\n          {format(new Date(media.createdAt), 'MMM d, yyyy')}\n        </TableCell>\n      </TableRow>\n    )\n  }\n)\n\nMediaRow.displayName = 'MediaRow'\n","import * as React from \"react\"\n\nimport { cn } from '../../lib/utils'\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","'use client'\n\nimport { MediaRow } from './MediaRow'\nimport { MediaContextMenu } from './MediaContextMenu'\nimport {\n  Table,\n  TableBody,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '../../ui/table'\nimport { Checkbox } from '../../ui/checkbox'\nimport { Skeleton } from '../../ui/skeleton'\nimport type { MediaWithRelations, FolderTree, TagWithCount } from '../../../lib/media/types'\n\ninterface MediaListProps {\n  media: MediaWithRelations[]\n  selectedIds: Set<string>\n  folders: FolderTree[]\n  tags: TagWithCount[]\n  loading: boolean\n  onSelect: (id: string) => void\n  onToggle: (id: string) => void\n  onSelectAll: () => void\n  onClick: (media: MediaWithRelations) => void\n  onPreview: (media: MediaWithRelations) => void\n  onMove: (mediaId: string, folderId: string | null) => void\n  onAddTag: (mediaId: string, tagId: string) => void\n  onDelete: (mediaId: string) => void\n  onRename: (media: MediaWithRelations) => void\n  onEditDetails: (media: MediaWithRelations) => void\n  onViewUsage: (media: MediaWithRelations) => void\n}\n\nexport function MediaList({\n  media,\n  selectedIds,\n  folders,\n  tags,\n  loading,\n  onSelect,\n  onToggle,\n  onSelectAll,\n  onClick,\n  onPreview,\n  onMove,\n  onAddTag,\n  onDelete,\n  onRename,\n  onEditDetails,\n  onViewUsage,\n}: MediaListProps) {\n  const allSelected = media.length > 0 && selectedIds.size === media.length\n  const someSelected = selectedIds.size > 0 && selectedIds.size < media.length\n\n  if (loading) {\n    return (\n      <div className=\"space-y-2\">\n        {Array.from({ length: 8 }).map((_, i) => (\n          <div key={i} className=\"flex items-center gap-4 py-3\">\n            <Skeleton className=\"h-4 w-4\" />\n            <Skeleton className=\"h-10 w-10 rounded\" />\n            <div className=\"flex-1 space-y-1\">\n              <Skeleton className=\"h-4 w-48\" />\n              <Skeleton className=\"h-3 w-32\" />\n            </div>\n            <Skeleton className=\"h-4 w-16\" />\n            <Skeleton className=\"h-4 w-20\" />\n          </div>\n        ))}\n      </div>\n    )\n  }\n\n  if (media.length === 0) {\n    return (\n      <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n        <p className=\"text-muted-foreground\">No media files found</p>\n        <p className=\"text-sm text-muted-foreground mt-1\">\n          Upload files or change your filters\n        </p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"rounded-md border\">\n      <Table>\n        <TableHeader>\n          <TableRow>\n            <TableHead className=\"w-12\">\n              <Checkbox\n                checked={allSelected}\n                ref={(el) => {\n                  if (el) {\n                    (el as any).indeterminate = someSelected\n                  }\n                }}\n                onCheckedChange={onSelectAll}\n              />\n            </TableHead>\n            <TableHead className=\"w-12\"></TableHead>\n            <TableHead>Name</TableHead>\n            <TableHead>Type</TableHead>\n            <TableHead>Size</TableHead>\n            <TableHead>Dimensions</TableHead>\n            <TableHead>Tags</TableHead>\n            <TableHead>Date</TableHead>\n          </TableRow>\n        </TableHeader>\n        <TableBody>\n          {media.map((item) => (\n            <MediaContextMenu\n              key={item.id}\n              media={item}\n              folders={folders}\n              tags={tags}\n              onPreview={() => onPreview(item)}\n              onOpenInNewTab={() => window.open(item.url, '_blank')}\n              onCopyUrl={() => navigator.clipboard.writeText(item.url)}\n              onDownload={() => {\n                const a = document.createElement('a')\n                a.href = item.url\n                a.download = item.filename\n                a.click()\n              }}\n              onRename={() => onRename(item)}\n              onEditDetails={() => onEditDetails(item)}\n              onMove={(folderId) => onMove(item.id, folderId)}\n              onAddTag={(tagId) => onAddTag(item.id, tagId)}\n              onViewUsage={() => onViewUsage(item)}\n              onDelete={() => onDelete(item.id)}\n            >\n              <MediaRow\n                media={item}\n                selected={selectedIds.has(item.id)}\n                onSelect={() => onSelect(item.id)}\n                onToggle={() => onToggle(item.id)}\n                onClick={() => onClick(item)}\n              />\n            </MediaContextMenu>\n          ))}\n        </TableBody>\n      </Table>\n    </div>\n  )\n}\n","'use client'\n\nimport { Button } from '../../ui/button'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '../../ui/select'\nimport { Input } from '../../ui/input'\nimport { LayoutGrid, List, Upload, Search, SlidersHorizontal } from 'lucide-react'\nimport type { ViewMode, MediaType, MediaFilters } from '../../../lib/media/types'\n\ninterface MediaToolbarProps {\n  viewMode: ViewMode\n  filters: MediaFilters\n  onViewModeChange: (mode: ViewMode) => void\n  onSearch: (search: string) => void\n  onTypeFilter: (type: MediaType | undefined) => void\n  onSortChange: (sortBy: MediaFilters['sortBy'], sortOrder: MediaFilters['sortOrder']) => void\n  onUpload: () => void\n}\n\nconst typeOptions = [\n  { value: 'all', label: 'All Types' },\n  { value: 'image', label: 'Images' },\n  { value: 'video', label: 'Videos' },\n  { value: 'audio', label: 'Audio' },\n  { value: 'document', label: 'Documents' },\n] as const\n\nconst sortOptions = [\n  { value: 'createdAt-desc', label: 'Newest first' },\n  { value: 'createdAt-asc', label: 'Oldest first' },\n  { value: 'name-asc', label: 'Name A-Z' },\n  { value: 'name-desc', label: 'Name Z-A' },\n  { value: 'size-desc', label: 'Largest first' },\n  { value: 'size-asc', label: 'Smallest first' },\n] as const\n\nexport function MediaToolbar({\n  viewMode,\n  filters,\n  onViewModeChange,\n  onSearch,\n  onTypeFilter,\n  onSortChange,\n  onUpload,\n}: MediaToolbarProps) {\n  const currentSort = `${filters.sortBy || 'createdAt'}-${filters.sortOrder || 'desc'}`\n\n  return (\n    <div className=\"flex flex-col sm:flex-row gap-3 items-start sm:items-center justify-between\">\n      <div className=\"flex flex-wrap gap-2 items-center\">\n        {/* Search */}\n        <div className=\"relative\">\n          <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search media...\"\n            value={filters.search || ''}\n            onChange={(e) => onSearch(e.target.value)}\n            className=\"pl-8 w-[200px]\"\n          />\n        </div>\n\n        {/* Type filter */}\n        <Select\n          value={filters.type || 'all'}\n          onValueChange={(value) =>\n            onTypeFilter(value === 'all' ? undefined : (value as MediaType))\n          }\n        >\n          <SelectTrigger className=\"w-[140px]\">\n            <SelectValue placeholder=\"All types\" />\n          </SelectTrigger>\n          <SelectContent>\n            {typeOptions.map((option) => (\n              <SelectItem key={option.value} value={option.value}>\n                {option.label}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n\n        {/* Sort */}\n        <Select\n          value={currentSort}\n          onValueChange={(value) => {\n            const [sortBy, sortOrder] = value.split('-') as [\n              MediaFilters['sortBy'],\n              MediaFilters['sortOrder']\n            ]\n            onSortChange(sortBy, sortOrder)\n          }}\n        >\n          <SelectTrigger className=\"w-[160px]\">\n            <SlidersHorizontal className=\"h-4 w-4 mr-2\" />\n            <SelectValue placeholder=\"Sort by\" />\n          </SelectTrigger>\n          <SelectContent>\n            {sortOptions.map((option) => (\n              <SelectItem key={option.value} value={option.value}>\n                {option.label}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n\n      <div className=\"flex gap-2 items-center\">\n        {/* View mode toggle */}\n        <div className=\"flex border rounded-md\">\n          <Button\n            variant={viewMode === 'grid' ? 'secondary' : 'ghost'}\n            size=\"sm\"\n            className=\"rounded-r-none\"\n            onClick={() => onViewModeChange('grid')}\n          >\n            <LayoutGrid className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            variant={viewMode === 'list' ? 'secondary' : 'ghost'}\n            size=\"sm\"\n            className=\"rounded-l-none\"\n            onClick={() => onViewModeChange('list')}\n          >\n            <List className=\"h-4 w-4\" />\n          </Button>\n        </div>\n\n        {/* Upload button */}\n        <Button onClick={onUpload}>\n          <Upload className=\"h-4 w-4 mr-2\" />\n          Upload\n        </Button>\n      </div>\n    </div>\n  )\n}\n","'use client'\n\nimport { useState } from 'react'\nimport { cn } from '../../../lib/utils'\nimport { Button } from '../../ui/button'\nimport { ScrollArea } from '../../ui/scroll-area'\nimport type { FolderTree } from '../../../lib/media/types'\nimport {\n  Folder,\n  FolderOpen,\n  ChevronRight,\n  ChevronDown,\n  Clock,\n  Image,\n  FolderPlus,\n} from 'lucide-react'\n\ninterface MediaFolderTreeProps {\n  folders: FolderTree[]\n  selectedFolderId: string | null | undefined\n  onSelectFolder: (folderId: string | null | undefined) => void\n  onCreateFolder: () => void\n}\n\ninterface FolderNodeProps {\n  folder: FolderTree\n  selectedFolderId: string | null | undefined\n  onSelect: (folderId: string) => void\n  depth?: number\n}\n\nfunction FolderNode({\n  folder,\n  selectedFolderId,\n  onSelect,\n  depth = 0,\n}: FolderNodeProps) {\n  const [expanded, setExpanded] = useState(true)\n  const hasChildren = folder.children && folder.children.length > 0\n  const isSelected = selectedFolderId === folder.id\n  const FolderIcon = expanded ? FolderOpen : Folder\n\n  return (\n    <div>\n      <button\n        onClick={() => onSelect(folder.id)}\n        className={cn(\n          'w-full flex items-center gap-1 px-2 py-1.5 rounded-md text-sm hover:bg-accent transition-colors',\n          isSelected && 'bg-accent'\n        )}\n        style={{ paddingLeft: 8 + depth * 16 }}\n      >\n        {hasChildren ? (\n          <button\n            onClick={(e) => {\n              e.stopPropagation()\n              setExpanded(!expanded)\n            }}\n            className=\"p-0.5 hover:bg-muted rounded\"\n          >\n            {expanded ? (\n              <ChevronDown className=\"h-3 w-3\" />\n            ) : (\n              <ChevronRight className=\"h-3 w-3\" />\n            )}\n          </button>\n        ) : (\n          <span className=\"w-4\" />\n        )}\n        <FolderIcon\n          className=\"h-4 w-4 text-muted-foreground flex-shrink-0\"\n          style={folder.color ? { color: folder.color } : undefined}\n        />\n        <span className=\"truncate flex-1 text-left\">{folder.name}</span>\n        {folder.mediaCount !== undefined && folder.mediaCount > 0 && (\n          <span className=\"text-xs text-muted-foreground\">{folder.mediaCount}</span>\n        )}\n      </button>\n\n      {expanded && hasChildren && (\n        <div>\n          {folder.children.map((child) => (\n            <FolderNode\n              key={child.id}\n              folder={child}\n              selectedFolderId={selectedFolderId}\n              onSelect={onSelect}\n              depth={depth + 1}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport function MediaFolderTree({\n  folders,\n  selectedFolderId,\n  onSelectFolder,\n  onCreateFolder,\n}: MediaFolderTreeProps) {\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"p-3 border-b\">\n        <h3 className=\"font-semibold text-sm\">Folders</h3>\n      </div>\n\n      <ScrollArea className=\"flex-1\">\n        <div className=\"p-2 space-y-1\">\n          {/* Recent */}\n          <button\n            onClick={() => onSelectFolder(undefined)}\n            className={cn(\n              'w-full flex items-center gap-2 px-2 py-1.5 rounded-md text-sm hover:bg-accent transition-colors',\n              selectedFolderId === undefined && 'bg-accent'\n            )}\n          >\n            <Clock className=\"h-4 w-4 text-muted-foreground\" />\n            <span>Recent</span>\n          </button>\n\n          {/* All */}\n          <button\n            onClick={() => onSelectFolder(null)}\n            className={cn(\n              'w-full flex items-center gap-2 px-2 py-1.5 rounded-md text-sm hover:bg-accent transition-colors',\n              selectedFolderId === null && 'bg-accent'\n            )}\n          >\n            <Image className=\"h-4 w-4 text-muted-foreground\" />\n            <span>All Media</span>\n          </button>\n\n          {/* Folder tree */}\n          {folders.length > 0 && (\n            <div className=\"pt-2 mt-2 border-t\">\n              {folders.map((folder) => (\n                <FolderNode\n                  key={folder.id}\n                  folder={folder}\n                  selectedFolderId={selectedFolderId}\n                  onSelect={onSelectFolder}\n                />\n              ))}\n            </div>\n          )}\n        </div>\n      </ScrollArea>\n\n      <div className=\"p-3 border-t\">\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          className=\"w-full\"\n          onClick={onCreateFolder}\n        >\n          <FolderPlus className=\"h-4 w-4 mr-2\" />\n          New Folder\n        </Button>\n      </div>\n    </div>\n  )\n}\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from \"lucide-react\"\n\nimport { cn } from '../../lib/utils'\n\nfunction DropdownMenu({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {\n  return <DropdownMenuPrimitive.Root data-slot=\"dropdown-menu\" {...props} />\n}\n\nfunction DropdownMenuPortal({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {\n  return (\n    <DropdownMenuPrimitive.Portal data-slot=\"dropdown-menu-portal\" {...props} />\n  )\n}\n\nfunction DropdownMenuTrigger({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {\n  return (\n    <DropdownMenuPrimitive.Trigger\n      data-slot=\"dropdown-menu-trigger\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuContent({\n  className,\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <DropdownMenuPrimitive.Content\n        data-slot=\"dropdown-menu-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md\",\n          className\n        )}\n        {...props}\n      />\n    </DropdownMenuPrimitive.Portal>\n  )\n}\n\nfunction DropdownMenuGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {\n  return (\n    <DropdownMenuPrimitive.Group data-slot=\"dropdown-menu-group\" {...props} />\n  )\n}\n\nfunction DropdownMenuItem({\n  className,\n  inset,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {\n  inset?: boolean\n  variant?: \"default\" | \"destructive\"\n}) {\n  return (\n    <DropdownMenuPrimitive.Item\n      data-slot=\"dropdown-menu-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {\n  return (\n    <DropdownMenuPrimitive.CheckboxItem\n      data-slot=\"dropdown-menu-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.CheckboxItem>\n  )\n}\n\nfunction DropdownMenuRadioGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {\n  return (\n    <DropdownMenuPrimitive.RadioGroup\n      data-slot=\"dropdown-menu-radio-group\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {\n  return (\n    <DropdownMenuPrimitive.RadioItem\n      data-slot=\"dropdown-menu-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.RadioItem>\n  )\n}\n\nfunction DropdownMenuLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.Label\n      data-slot=\"dropdown-menu-label\"\n      data-inset={inset}\n      className={cn(\n        \"px-2 py-1.5 text-sm font-medium data-[inset]:pl-8\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {\n  return (\n    <DropdownMenuPrimitive.Separator\n      data-slot=\"dropdown-menu-separator\"\n      className={cn(\"bg-border -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuShortcut({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"dropdown-menu-shortcut\"\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSub({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {\n  return <DropdownMenuPrimitive.Sub data-slot=\"dropdown-menu-sub\" {...props} />\n}\n\nfunction DropdownMenuSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      data-slot=\"dropdown-menu-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto size-4\" />\n    </DropdownMenuPrimitive.SubTrigger>\n  )\n}\n\nfunction DropdownMenuSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {\n  return (\n    <DropdownMenuPrimitive.SubContent\n      data-slot=\"dropdown-menu-sub-content\"\n      className={cn(\n        \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  DropdownMenu,\n  DropdownMenuPortal,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuLabel,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuSub,\n  DropdownMenuSubTrigger,\n  DropdownMenuSubContent,\n}\n","'use client'\n\nimport { Button } from '../../ui/button'\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuTrigger,\n} from '../../ui/dropdown-menu'\nimport type { FolderTree, TagWithCount } from '../../../lib/media/types'\nimport {\n  X,\n  FolderInput,\n  Tags,\n  Trash,\n  FolderIcon,\n  Tag,\n  MoreHorizontal,\n} from 'lucide-react'\n\ninterface MediaBulkActionsProps {\n  selectedCount: number\n  folders: FolderTree[]\n  tags: TagWithCount[]\n  onClearSelection: () => void\n  onMove: (folderId: string | null) => void\n  onTag: (tagIds: string[]) => void\n  onDelete: () => void\n}\n\nexport function MediaBulkActions({\n  selectedCount,\n  folders,\n  tags,\n  onClearSelection,\n  onMove,\n  onTag,\n  onDelete,\n}: MediaBulkActionsProps) {\n  if (selectedCount === 0) return null\n\n  const renderFolderOptions = (folders: FolderTree[], depth = 0): React.ReactNode[] => {\n    return folders.flatMap((folder) => [\n      <DropdownMenuItem key={folder.id} onClick={() => onMove(folder.id)}>\n        <span style={{ paddingLeft: depth * 12 }}>\n          <FolderIcon className=\"mr-2 h-4 w-4 inline\" />\n          {folder.name}\n        </span>\n      </DropdownMenuItem>,\n      ...(folder.children && folder.children.length > 0\n        ? renderFolderOptions(folder.children, depth + 1)\n        : []),\n    ])\n  }\n\n  return (\n    <div className=\"flex items-center gap-3 p-3 bg-muted rounded-lg\">\n      <div className=\"flex items-center gap-2\">\n        <Button variant=\"ghost\" size=\"sm\" onClick={onClearSelection}>\n          <X className=\"h-4 w-4\" />\n        </Button>\n        <span className=\"text-sm font-medium\">\n          {selectedCount} item{selectedCount !== 1 ? 's' : ''} selected\n        </span>\n      </div>\n\n      <div className=\"flex items-center gap-2 ml-auto\">\n        {/* Move to folder */}\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\">\n              <FolderInput className=\"h-4 w-4 mr-2\" />\n              Move\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent className=\"w-48 max-h-64 overflow-y-auto\">\n            <DropdownMenuItem onClick={() => onMove(null)}>\n              <FolderIcon className=\"mr-2 h-4 w-4\" />\n              Root (No folder)\n            </DropdownMenuItem>\n            {folders.length > 0 && (\n              <>\n                <DropdownMenuSeparator />\n                {renderFolderOptions(folders)}\n              </>\n            )}\n          </DropdownMenuContent>\n        </DropdownMenu>\n\n        {/* Add tags */}\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\">\n              <Tags className=\"h-4 w-4 mr-2\" />\n              Tag\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent className=\"w-48 max-h-64 overflow-y-auto\">\n            {tags.length > 0 ? (\n              tags.map((tag) => (\n                <DropdownMenuItem key={tag.id} onClick={() => onTag([tag.id])}>\n                  <Tag\n                    className=\"mr-2 h-4 w-4\"\n                    style={tag.color ? { color: tag.color } : undefined}\n                  />\n                  {tag.name}\n                </DropdownMenuItem>\n              ))\n            ) : (\n              <DropdownMenuItem disabled>No tags available</DropdownMenuItem>\n            )}\n          </DropdownMenuContent>\n        </DropdownMenu>\n\n        {/* Delete */}\n        <Button variant=\"destructive\" size=\"sm\" onClick={onDelete}>\n          <Trash className=\"h-4 w-4 mr-2\" />\n          Delete\n        </Button>\n      </div>\n    </div>\n  )\n}\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport Image from 'next/image'\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n} from '../../ui/sheet'\nimport { Button } from '../../ui/button'\nimport { Input } from '../../ui/input'\nimport { Label } from '../../ui/label'\nimport { Textarea } from '../../ui/textarea'\nimport { Badge } from '../../ui/badge'\nimport { Separator } from '../../ui/separator'\nimport { ScrollArea } from '../../ui/scroll-area'\nimport { getMediaType, formatFileSize } from '../../../lib/media/types'\nimport type { MediaWithRelations, UsageInfo } from '../../../lib/media/types'\nimport { format } from 'date-fns'\nimport {\n  FileText,\n  Film,\n  Music,\n  ImageIcon,\n  File,\n  ExternalLink,\n  Copy,\n  Download,\n  Trash,\n  Save,\n  X,\n} from 'lucide-react'\n\ninterface MediaPreviewSheetProps {\n  media: MediaWithRelations | null\n  open: boolean\n  onClose: () => void\n  onSave: (id: string, data: { title?: string; alt?: string; caption?: string; description?: string }) => Promise<void>\n  onDelete: (id: string) => void\n}\n\nconst typeIcons = {\n  image: ImageIcon,\n  video: Film,\n  audio: Music,\n  document: FileText,\n  other: File,\n}\n\nexport function MediaPreviewSheet({\n  media,\n  open,\n  onClose,\n  onSave,\n  onDelete,\n}: MediaPreviewSheetProps) {\n  const [title, setTitle] = useState('')\n  const [alt, setAlt] = useState('')\n  const [caption, setCaption] = useState('')\n  const [description, setDescription] = useState('')\n  const [usage, setUsage] = useState<UsageInfo[]>([])\n  const [loadingUsage, setLoadingUsage] = useState(false)\n  const [saving, setSaving] = useState(false)\n\n  useEffect(() => {\n    if (media) {\n      setTitle(media.title || '')\n      setAlt(media.alt || '')\n      setCaption(media.caption || '')\n      setDescription(media.description || '')\n\n      // Fetch usage\n      setLoadingUsage(true)\n      fetch(`/api/media/${media.id}/usage`)\n        .then((res) => res.json())\n        .then((data) => setUsage(data.usages || []))\n        .catch(console.error)\n        .finally(() => setLoadingUsage(false))\n    }\n  }, [media])\n\n  if (!media) return null\n\n  const mediaType = getMediaType(media.mimeType)\n  const Icon = typeIcons[mediaType]\n\n  const handleSave = async () => {\n    setSaving(true)\n    try {\n      await onSave(media.id, { title, alt, caption, description })\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const hasChanges =\n    title !== (media.title || '') ||\n    alt !== (media.alt || '') ||\n    caption !== (media.caption || '') ||\n    description !== (media.description || '')\n\n  return (\n    <Sheet open={open} onOpenChange={(open) => !open && onClose()}>\n      <SheetContent className=\"w-full sm:max-w-lg\">\n        <SheetHeader>\n          <SheetTitle className=\"flex items-center gap-2\">\n            <Icon className=\"h-5 w-5\" />\n            Media Details\n          </SheetTitle>\n        </SheetHeader>\n\n        <ScrollArea className=\"h-[calc(100vh-8rem)] pr-4\">\n          <div className=\"space-y-6 py-4\">\n            {/* Preview */}\n            <div className=\"aspect-video relative bg-muted rounded-lg overflow-hidden\">\n              {mediaType === 'image' ? (\n                <Image\n                  src={media.url}\n                  alt={media.alt || media.filename}\n                  fill\n                  className=\"object-contain\"\n                />\n              ) : mediaType === 'video' ? (\n                <video\n                  src={media.url}\n                  controls\n                  className=\"w-full h-full object-contain\"\n                />\n              ) : mediaType === 'audio' ? (\n                <div className=\"w-full h-full flex items-center justify-center p-4\">\n                  <audio src={media.url} controls className=\"w-full\" />\n                </div>\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center\">\n                  <Icon className=\"h-16 w-16 text-muted-foreground\" />\n                </div>\n              )}\n            </div>\n\n            {/* Actions */}\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => window.open(media.url, '_blank')}\n              >\n                <ExternalLink className=\"h-4 w-4 mr-1\" />\n                Open\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => navigator.clipboard.writeText(media.url)}\n              >\n                <Copy className=\"h-4 w-4 mr-1\" />\n                Copy URL\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => {\n                  const a = document.createElement('a')\n                  a.href = media.url\n                  a.download = media.filename\n                  a.click()\n                }}\n              >\n                <Download className=\"h-4 w-4 mr-1\" />\n                Download\n              </Button>\n            </div>\n\n            <Separator />\n\n            {/* File info */}\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <p className=\"text-muted-foreground\">Filename</p>\n                <p className=\"font-medium truncate\">{media.filename}</p>\n              </div>\n              <div>\n                <p className=\"text-muted-foreground\">Original Name</p>\n                <p className=\"font-medium truncate\">{media.originalName}</p>\n              </div>\n              <div>\n                <p className=\"text-muted-foreground\">Type</p>\n                <p className=\"font-medium\">{media.mimeType}</p>\n              </div>\n              <div>\n                <p className=\"text-muted-foreground\">Size</p>\n                <p className=\"font-medium\">{formatFileSize(media.size)}</p>\n              </div>\n              {media.width && media.height && (\n                <div>\n                  <p className=\"text-muted-foreground\">Dimensions</p>\n                  <p className=\"font-medium\">\n                    {media.width}  {media.height}\n                  </p>\n                </div>\n              )}\n              <div>\n                <p className=\"text-muted-foreground\">Uploaded</p>\n                <p className=\"font-medium\">\n                  {format(new Date(media.createdAt), 'MMM d, yyyy')}\n                </p>\n              </div>\n            </div>\n\n            <Separator />\n\n            {/* Editable fields */}\n            <div className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"title\">Title</Label>\n                <Input\n                  id=\"title\"\n                  value={title}\n                  onChange={(e) => setTitle(e.target.value)}\n                  placeholder=\"Enter title...\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"alt\">Alt Text</Label>\n                <Input\n                  id=\"alt\"\n                  value={alt}\n                  onChange={(e) => setAlt(e.target.value)}\n                  placeholder=\"Describe the image for accessibility...\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"caption\">Caption</Label>\n                <Input\n                  id=\"caption\"\n                  value={caption}\n                  onChange={(e) => setCaption(e.target.value)}\n                  placeholder=\"Caption to display...\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"description\">Description</Label>\n                <Textarea\n                  id=\"description\"\n                  value={description}\n                  onChange={(e) => setDescription(e.target.value)}\n                  placeholder=\"Longer description...\"\n                  rows={3}\n                />\n              </div>\n            </div>\n\n            {/* Tags */}\n            {media.tags && media.tags.length > 0 && (\n              <>\n                <Separator />\n                <div>\n                  <p className=\"text-sm font-medium mb-2\">Tags</p>\n                  <div className=\"flex flex-wrap gap-1\">\n                    {media.tags.map((tagRelation) => (\n                      <Badge\n                        key={tagRelation.tag.id}\n                        variant=\"secondary\"\n                        style={\n                          tagRelation.tag.color\n                            ? { borderColor: tagRelation.tag.color }\n                            : undefined\n                        }\n                      >\n                        {tagRelation.tag.name}\n                      </Badge>\n                    ))}\n                  </div>\n                </div>\n              </>\n            )}\n\n            {/* Usage */}\n            <Separator />\n            <div>\n              <p className=\"text-sm font-medium mb-2\">Usage</p>\n              {loadingUsage ? (\n                <p className=\"text-sm text-muted-foreground\">Loading...</p>\n              ) : usage.length > 0 ? (\n                <div className=\"space-y-2\">\n                  {usage.map((u) => (\n                    <a\n                      key={u.id}\n                      href={u.url}\n                      className=\"block p-2 rounded-md bg-muted hover:bg-muted/80 transition-colors\"\n                    >\n                      <p className=\"text-sm font-medium\">{u.entityTitle}</p>\n                      <p className=\"text-xs text-muted-foreground\">\n                        {u.entityType}\n                        {u.fieldName && `  ${u.fieldName}`}\n                      </p>\n                    </a>\n                  ))}\n                </div>\n              ) : (\n                <p className=\"text-sm text-muted-foreground\">\n                  Not used anywhere\n                </p>\n              )}\n            </div>\n\n            <Separator />\n\n            {/* Save / Delete */}\n            <div className=\"flex gap-2\">\n              <Button\n                onClick={handleSave}\n                disabled={!hasChanges || saving}\n                className=\"flex-1\"\n              >\n                <Save className=\"h-4 w-4 mr-2\" />\n                {saving ? 'Saving...' : 'Save Changes'}\n              </Button>\n              <Button\n                variant=\"destructive\"\n                onClick={() => onDelete(media.id)}\n              >\n                <Trash className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n        </ScrollArea>\n      </SheetContent>\n    </Sheet>\n  )\n}\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from '../../lib/utils'\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","'use client'\n\nimport { useCallback, useState } from 'react'\nimport { useDropzone } from 'react-dropzone'\nimport { cn } from '../../../lib/utils'\nimport { Button } from '../../ui/button'\nimport { Progress } from '../../ui/progress'\nimport { Upload, X, Check, AlertCircle, FileIcon } from 'lucide-react'\nimport type { UploadProgress } from '../../../lib/media/types'\nimport { formatFileSize } from '../../../lib/media/types'\n\ninterface MediaUploaderProps {\n  folderId?: string | null\n  uploads: UploadProgress[]\n  isUploading: boolean\n  onUpload: (files: File[]) => Promise<void> | Promise<unknown[]>\n  onClearCompleted: () => void\n  className?: string\n}\n\nexport function MediaUploader({\n  folderId,\n  uploads,\n  isUploading,\n  onUpload,\n  onClearCompleted,\n  className,\n}: MediaUploaderProps) {\n  const [isDragActive, setIsDragActive] = useState(false)\n\n  const onDrop = useCallback(\n    async (acceptedFiles: File[]) => {\n      await onUpload(acceptedFiles)\n    },\n    [onUpload]\n  )\n\n  const { getRootProps, getInputProps, open } = useDropzone({\n    onDrop,\n    onDragEnter: () => setIsDragActive(true),\n    onDragLeave: () => setIsDragActive(false),\n    noClick: true,\n    noKeyboard: true,\n  })\n\n  const hasUploads = uploads.length > 0\n  const hasCompleted = uploads.some(\n    (u) => u.status === 'complete' || u.status === 'error'\n  )\n\n  return (\n    <div className={cn('space-y-4', className)}>\n      {/* Drop zone */}\n      <div\n        {...getRootProps()}\n        className={cn(\n          'relative border-2 border-dashed rounded-lg p-8 text-center transition-colors',\n          isDragActive\n            ? 'border-primary bg-primary/5'\n            : 'border-muted-foreground/25 hover:border-muted-foreground/50',\n          isUploading && 'pointer-events-none opacity-50'\n        )}\n      >\n        <input {...getInputProps()} />\n\n        <div className=\"flex flex-col items-center gap-2\">\n          <Upload\n            className={cn(\n              'h-10 w-10 transition-colors',\n              isDragActive ? 'text-primary' : 'text-muted-foreground'\n            )}\n          />\n          <div>\n            <p className=\"font-medium\">\n              {isDragActive ? 'Drop files here' : 'Drag and drop files here'}\n            </p>\n            <p className=\"text-sm text-muted-foreground mt-1\">\n              or{' '}\n              <button\n                type=\"button\"\n                onClick={open}\n                className=\"text-primary hover:underline\"\n                disabled={isUploading}\n              >\n                browse files\n              </button>\n            </p>\n          </div>\n          <p className=\"text-xs text-muted-foreground\">\n            Images, videos, audio, and documents up to 50MB\n          </p>\n        </div>\n      </div>\n\n      {/* Upload progress */}\n      {hasUploads && (\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between\">\n            <p className=\"text-sm font-medium\">Uploads</p>\n            {hasCompleted && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={onClearCompleted}\n                className=\"h-auto py-1 px-2 text-xs\"\n              >\n                Clear completed\n              </Button>\n            )}\n          </div>\n\n          <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n            {uploads.map((upload) => (\n              <div\n                key={upload.id}\n                className=\"flex items-center gap-3 p-2 rounded-md bg-muted/50\"\n              >\n                <div className=\"flex-shrink-0\">\n                  {upload.status === 'complete' ? (\n                    <div className=\"h-8 w-8 rounded-full bg-green-100 flex items-center justify-center\">\n                      <Check className=\"h-4 w-4 text-green-600\" />\n                    </div>\n                  ) : upload.status === 'error' ? (\n                    <div className=\"h-8 w-8 rounded-full bg-red-100 flex items-center justify-center\">\n                      <AlertCircle className=\"h-4 w-4 text-red-600\" />\n                    </div>\n                  ) : (\n                    <div className=\"h-8 w-8 rounded-full bg-muted flex items-center justify-center\">\n                      <FileIcon className=\"h-4 w-4 text-muted-foreground\" />\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-medium truncate\">{upload.filename}</p>\n                  <div className=\"flex items-center gap-2\">\n                    {upload.status === 'uploading' ? (\n                      <Progress value={upload.progress} className=\"h-1 flex-1\" />\n                    ) : upload.status === 'error' ? (\n                      <p className=\"text-xs text-red-600 truncate\">{upload.error}</p>\n                    ) : upload.status === 'complete' ? (\n                      <p className=\"text-xs text-muted-foreground\">Complete</p>\n                    ) : (\n                      <p className=\"text-xs text-muted-foreground\">Pending</p>\n                    )}\n                    {upload.size && (\n                      <span className=\"text-xs text-muted-foreground flex-shrink-0\">\n                        {formatFileSize(upload.size)}\n                      </span>\n                    )}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '../../ui/dialog'\nimport { Button } from '../../ui/button'\nimport { Input } from '../../ui/input'\nimport { Label } from '../../ui/label'\nimport { Textarea } from '../../ui/textarea'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '../../ui/select'\nimport type { FolderTree, FolderWithRelations } from '../../../lib/media/types'\nimport { Folder } from 'lucide-react'\n\ninterface FolderDialogProps {\n  open: boolean\n  folder?: FolderWithRelations | null\n  folders: FolderTree[]\n  onClose: () => void\n  onSave: (data: {\n    name: string\n    description?: string\n    color?: string\n    parentId?: string | null\n  }) => Promise<void>\n}\n\nconst colorOptions = [\n  { value: '', label: 'Default' },\n  { value: '#ef4444', label: 'Red' },\n  { value: '#f97316', label: 'Orange' },\n  { value: '#eab308', label: 'Yellow' },\n  { value: '#22c55e', label: 'Green' },\n  { value: '#3b82f6', label: 'Blue' },\n  { value: '#8b5cf6', label: 'Purple' },\n  { value: '#ec4899', label: 'Pink' },\n]\n\nexport function FolderDialog({\n  open,\n  folder,\n  folders,\n  onClose,\n  onSave,\n}: FolderDialogProps) {\n  const [name, setName] = useState('')\n  const [description, setDescription] = useState('')\n  const [color, setColor] = useState('')\n  const [parentId, setParentId] = useState<string | null>(null)\n  const [saving, setSaving] = useState(false)\n\n  const isEditing = !!folder\n\n  useEffect(() => {\n    if (folder) {\n      setName(folder.name)\n      setDescription(folder.description || '')\n      setColor(folder.color || '')\n      setParentId(folder.parentId)\n    } else {\n      setName('')\n      setDescription('')\n      setColor('')\n      setParentId(null)\n    }\n  }, [folder, open])\n\n  const flattenFolders = (\n    folders: FolderTree[],\n    depth = 0,\n    exclude?: string\n  ): Array<{ id: string; name: string; depth: number }> => {\n    const result: Array<{ id: string; name: string; depth: number }> = []\n\n    for (const f of folders) {\n      if (f.id !== exclude) {\n        result.push({ id: f.id, name: f.name, depth })\n        if (f.children && f.children.length > 0) {\n          result.push(...flattenFolders(f.children, depth + 1, exclude))\n        }\n      }\n    }\n\n    return result\n  }\n\n  const availableFolders = flattenFolders(folders, 0, folder?.id)\n\n  const handleSave = async () => {\n    if (!name.trim()) return\n\n    setSaving(true)\n    try {\n      await onSave({\n        name: name.trim(),\n        description: description.trim() || undefined,\n        color: color || undefined,\n        parentId,\n      })\n      onClose()\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Folder className=\"h-5 w-5\" />\n            {isEditing ? 'Edit Folder' : 'New Folder'}\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          <div>\n            <Label htmlFor=\"name\">Name</Label>\n            <Input\n              id=\"name\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              placeholder=\"Folder name...\"\n              autoFocus\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"description\">Description</Label>\n            <Textarea\n              id=\"description\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              placeholder=\"Optional description...\"\n              rows={2}\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"parent\">Parent Folder</Label>\n            <Select\n              value={parentId || 'root'}\n              onValueChange={(value) =>\n                setParentId(value === 'root' ? null : value)\n              }\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select parent folder\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"root\">Root (No parent)</SelectItem>\n                {availableFolders.map((f) => (\n                  <SelectItem key={f.id} value={f.id}>\n                    <span style={{ paddingLeft: f.depth * 12 }}>{f.name}</span>\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div>\n            <Label htmlFor=\"color\">Color</Label>\n            <Select value={color} onValueChange={setColor}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select color\" />\n              </SelectTrigger>\n              <SelectContent>\n                {colorOptions.map((option) => (\n                  <SelectItem key={option.value || 'default'} value={option.value || 'default'}>\n                    <div className=\"flex items-center gap-2\">\n                      {option.value && (\n                        <div\n                          className=\"w-4 h-4 rounded\"\n                          style={{ backgroundColor: option.value }}\n                        />\n                      )}\n                      {option.label}\n                    </div>\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleSave} disabled={!name.trim() || saving}>\n            {saving ? 'Saving...' : isEditing ? 'Save Changes' : 'Create Folder'}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from '../../lib/utils'\nimport { buttonVariants } from './button'\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"]}